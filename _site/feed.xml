<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.2.1">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2016-11-04T10:44:25-07:00</updated><id>/</id><title>Valentin Antonio Bautista</title><subtitle>I fell in love with software development_</subtitle><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><entry><title>Fabric.js is a powerful and simple Javascript HTML5 canvas library</title><link href="/blog/marionette-act-ii-testing/" rel="alternate" type="text/html" title="Fabric.js is a powerful and simple Javascript HTML5 canvas library" /><published>2016-08-22T00:00:00-07:00</published><updated>2016-08-22T00:00:00-07:00</updated><id>/blog/marionette-act-ii-testing</id><content type="html" xml:base="/blog/marionette-act-ii-testing/">&lt;p&gt;Fabric provides interactive object model on top of canvas element
&lt;a href=&quot;http://fabricjs.com/&quot;&gt;Fabric&lt;/a&gt; also has SVG-to-canvas (and canvas-to-SVG) parser&lt;/p&gt;

&lt;!-- Welcome back to my post series on the [Marionette](https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette) project! In [Act I](/blog/marionette-act-i-automation/), we looked into Marionette's automation framework for Gecko, the engine behind the Firefox browser. Here in Act II, we'll take a look at a complementary side of the Marionette project: the testing framework that helps us run tests using our Marionette-animated browser, aka the [Marionette test harness](https://developer.mozilla.org/en-US/docs/Marionette_Test_Runner). If -- like me at the start of my [Outreachy internship](/blog/outreachy-what-how-why/) -- you're [clueless](https://en.wikipedia.org/wiki/Clueless_(film)) about test harnesses, or the Marionette harness in particular, and want to fix that, you're in the right place! --&gt;

&lt;!--/excerpt--&gt;

&lt;h2 id=&quot;test-using-html5-magento-and-fabricjs&quot;&gt;Test Using HTML5, Magento and Fabricjs.&lt;/h2&gt;

&lt;!-- Quick recap from [Act I](/blog/marionette-act-i-automation/):
 --&gt;
&lt;blockquote&gt;
  &lt;p&gt;[-_-]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;es&quot;&gt;&lt;p lang=&quot;und&quot; dir=&quot;ltr&quot;&gt;&lt;a href=&quot;https://t.co/Tentx02jNh&quot;&gt;pic.twitter.com/Tentx02jNh&lt;/a&gt;&lt;/p&gt;&amp;mdash; Valentin Antonio Bta (@vantonio_) &lt;a href=&quot;https://twitter.com/vantonio_/status/772163640258535425&quot;&gt;3 de septiembre de 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;Well, one thing it’s great for is testing. Indulge me in a brief return to my puppet metaphor from last time, won’t you? If the &lt;em&gt;automation&lt;/em&gt; side of Marionette gives us strings and a handle that turn the browser into our puppet, the &lt;em&gt;testing&lt;/em&gt; side of Marionette gives that puppet a reason for being, by letting it perform: it sets up a stage for the puppet to dance on, tell it to carry out a given performance, write a review of that performance, and tear down the stage again.&lt;/p&gt;

&lt;p&gt;OK, OK, metaphor-indulgence over; let’s get real.&lt;/p&gt;

&lt;h2 id=&quot;wait-why-do-we-need-automated-browser-testing-again&quot;&gt;Wait, why do we need automated browser testing again?&lt;/h2&gt;

&lt;p&gt;As Firefox&lt;sup id=&quot;a1&quot;&gt;&lt;a href=&quot;#f1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; contributors, we don’t want to have to manually open up Firefox, click around, and check that everything works every time we change a line of code. We’re developers, we’re lazy!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://media4.popsugar-assets.com/files/thumbor/W4GOj04aYxDOfU2W8M8VooIy7A4/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2015/07/21/936/n/1922283/a3ec73cee2bf5525_1e96c7e2cf97ee07e043ac3cef331074/i/When-Your-Mom-Criticizes-Your-Strict-Diet-Quesadillas.gif&quot; alt=&quot;&amp;quot;Gosh, you say it like it's a bad thing&amp;quot; (GIF from the film &amp;quot;Clueless&amp;quot;)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;&lt;em&gt;Clueless&lt;/em&gt; via &lt;a href=&quot;http://www.popsugar.com/entertainment/Clueless-Movie-GIFs-37943154&quot;&gt;POPSUGAR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But we can’t &lt;em&gt;not&lt;/em&gt; do it, because then we might not realize that we’ve broken the entire internet (or, you know, introduced a bug that makes Firefox crash, which is just as bad).&lt;/p&gt;

&lt;p&gt;So instead of testing manually, we do the same thing we always do: make the computer do it for us!&lt;/p&gt;

&lt;p&gt;The type of program that can magically do this stuff for us is called a &lt;a href=&quot;https://en.wikipedia.org/wiki/Test_harness&quot;&gt;test harness&lt;/a&gt;. And there’s even a special version specific to testing Gecko-based browsers, called – can you guess? – the Marionette test harness, also known as the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Marionette_Test_Runner&quot;&gt;Marionette test runner&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;(Lazy) Firefox contributors, rejoice!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://media.tenor.co/images/5e3ed62355b84ea1662a5fcc9178e85f/raw&quot; alt=&quot;&amp;quot;Two enthusiastic thumbs up!&amp;quot; (GIF from the film &amp;quot;Clueless&amp;quot;)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;&lt;em&gt;Clueless&lt;/em&gt; via &lt;a href=&quot;https://www.tenor.co/view/thumbsup-enthusiastic-clueless-gif-5146508&quot;&gt;tenor&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So, what exactly is this magical “test harness” thing? And what do we need to know about the Marionette-specific one?&lt;/p&gt;

&lt;h2 id=&quot;whats-a-test-harness&quot;&gt;What’s a test harness?&lt;/h2&gt;

&lt;p&gt;First of all, let’s not get hung up on the name “test harness” – the names people use to refer to these things can be a bit ambiguous and confusing, as we saw with other parts of the Marionette suite in Act I. So let’s set aside the name of the thing for now, and focus on what the thing does.&lt;/p&gt;

&lt;p&gt;Assuming we have a framework like the Marionette client/server that lets us automatically control the browser, the other thing we need for automatically testing the browser is something that lets us:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Properly set up &amp;amp; launch the browser, and any other related components we might need&lt;/li&gt;
  &lt;li&gt;Define tests we want to perform and their expected results&lt;/li&gt;
  &lt;li&gt;Discover tests defined in a file or directory&lt;/li&gt;
  &lt;li&gt;Run those tests, using the automation framework to do the stuff we want to do in the browser&lt;/li&gt;
  &lt;li&gt;Keep track of what we actually saw, and how it compares to what we expected to see&lt;/li&gt;
  &lt;li&gt;Report the results in human- and/or machine-readable logs&lt;/li&gt;
  &lt;li&gt;Clean up all of that stuff we set up in the beginning&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Take out the browser-specific parts, and you’ve got the basic outline of what a test harness for any kind of software should do.&lt;/p&gt;

&lt;p&gt;Ever write tests using Python’s &lt;a href=&quot;https://docs.python.org/3/library/unittest.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt;&lt;/a&gt;, JavaScript’s &lt;a href=&quot;http://mochajs.org/&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mocha&lt;/code&gt;&lt;/a&gt;, Java’s &lt;a href=&quot;http://junit.org&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;JUnit&lt;/code&gt;&lt;/a&gt;, or a similar tool? If you’re like me, you might have been perfectly happy writing unit tests with one of these, thinking not:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Yeah, I know &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt;! It’s a test harness.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;but rather:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Yeah, I know &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt;! It’s, you know, a, like, thing for writing tests that lets you make assertions and write setup/teardown methods and stuff and, like, print out stuff about the test results, or whatever.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Turns out, they’re the same thing; one is just shorter (and less, like, full of “like”s, and stuff).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://media1.popsugar-assets.com/files/thumbor/cSwGkFRP96rFHR0GStr-CAC1m_4/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2015/07/21/936/n/1922283/f359498dff0704fd_Whatever-Clueless-GIF-1433983360/i/When-People-Tell-You-Going-Bed-9-pm-Lame.gif&quot; alt=&quot;&amp;quot;Whatever&amp;quot; (GIF from the film &amp;quot;Clueless&amp;quot;)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;&lt;em&gt;Clueless&lt;/em&gt; via &lt;a href=&quot;http://www.popsugar.com/entertainment/Clueless-Movie-GIFs-37943154&quot;&gt;POPSUGAR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So that’s the general idea of a test harness. But we’re not concerned with just any test harness; we want to know more about the &lt;em&gt;Marionette&lt;/em&gt; test harness.&lt;/p&gt;

&lt;h2 id=&quot;whats-special-about-the-marionette-test-harness&quot;&gt;What’s special about the Marionette test harness?&lt;/h2&gt;

&lt;p&gt;Um, like, duh, it’s made for tests using Marionette!&lt;/p&gt;

&lt;p&gt;What I mean is that unlike an all-purpose test harness, the Marionette harness already knows that you’re a Mozillian specifically interested in is running Gecko-based browser tests using Marionette. So instead of making you write code in for setup/teardown/logging/etc. that talks to Marionette and uses other features of the Mozilla ecosystem, it does that legwork for you.&lt;/p&gt;

&lt;p&gt;You still have control, though; it makes it easy for you to make decisions about certain Mozilla-/Gecko-specific properties that could affect your tests, like:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Need to use a specific Firefox binary? Or a particular Firefox instance running on a device somewhere?&lt;/li&gt;
  &lt;li&gt;Got a special profile or set of preferences you want the browser to run with?&lt;/li&gt;
  &lt;li&gt;Want &lt;a href=&quot;https://developer.mozilla.org/en-US/Firefox/Multiprocess_Firefox&quot;&gt;Electrolysis&lt;/a&gt; enabled, or not?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As well as some more general decisions, like:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Need to run an individual test module? A directory full of tests? Tests listed in a manifest file?&lt;/li&gt;
  &lt;li&gt;Want the tests run multiple times? Or in chunks?&lt;/li&gt;
  &lt;li&gt;How and where should the results be logged?&lt;/li&gt;
  &lt;li&gt;Care to drop into a debugger if something goes wrong?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;But how does it do all this? What does it look like on the inside? Let’s dive into the code to find out.&lt;/p&gt;

&lt;h2 id=&quot;how-does-the-marionette-harness-work&quot;&gt;How does the Marionette harness work?&lt;/h2&gt;

&lt;p&gt;Inside Marionette, in the file &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runtests.py#30&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;harness/marionette/runtests.py&lt;/code&gt;&lt;/a&gt;, we find the &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteHarness&lt;/code&gt; class. &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteHarness&lt;/code&gt; itself is quite simple: it takes in a set of &lt;em&gt;arguments&lt;/em&gt; that specify the desired preferences with respect to the type of decisions we just mentioned, uses an &lt;em&gt;argument parser&lt;/em&gt; to parse and process those arguments, and then passes them along to a &lt;em&gt;test runner&lt;/em&gt;, which runs the tests accordingly.&lt;/p&gt;

&lt;p&gt;So actually, it’s the “test runner” that does the brunt of the work of a test harness here. Perhaps for that reason, the names “Marionette Test Harness” and “Marionette Test Runner” sometimes seem to be used interchangeably, which I for one found quite confusing at first.&lt;/p&gt;

&lt;p&gt;Anyway, the test runner that &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteHarness&lt;/code&gt; makes use of is the &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteTestRunner&lt;/code&gt; class defined in &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runtests.py#18&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;runtests.py&lt;/code&gt;&lt;/a&gt;, but that’s really just a little wrapper around &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteTestRunner&lt;/code&gt; from &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#491&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;harness/marionette/runner/base.py&lt;/code&gt;&lt;/a&gt;, which is where the magic happens – and also where I’ve spent most of my time for my &lt;a href=&quot;/blog/outreachy-what-how-why/&quot;&gt;Outreachy&lt;/a&gt; &lt;a href=&quot;/blog/outreachy-halftime-ish-update/&quot;&gt;internship&lt;/a&gt;, but more on that later. For now let’s check out the runner!&lt;/p&gt;

&lt;h3 id=&quot;how-does-marionettes-test-runner-work&quot;&gt;How does Marionette’s test runner work?&lt;/h3&gt;

&lt;p&gt;The beating heart of the Marionette test runner is the method &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#860-931&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt;&lt;/a&gt;. By combining some methods that take care of general test-harness functionality and some methods that let us set up and keep tabs on a Marionette client-server session, &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt; gives us the Marionette-centric test harness we never knew we always wanted. Thanks, &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;To get an idea of how the test runner works, let’s take a walk through the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt; method and see what it does.&lt;sup id=&quot;a2&quot;&gt;&lt;a href=&quot;#f2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;First of all, it simply &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#861-862&quot;&gt;initializes&lt;/a&gt; some things, e.g. timers and counters for passed/failed tests. So far, so boring.&lt;/p&gt;

&lt;p&gt;Next, we get to the part that puts the “Marionette” in “Marionette test runner”. The &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt; method &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#864-865&quot;&gt;starts up Marionette&lt;/a&gt;, by &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#815&quot;&gt;creating a &lt;code class=&quot;highlighter-rouge&quot;&gt;Marionette&lt;/code&gt; object&lt;/a&gt; – passing in the appropriate &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#688-749&quot;&gt;arguments&lt;/a&gt; based on the runner’s settings – which gives us the client-server session we need to automate the browser in the tests we’re about to run (we know how that all works from &lt;a href=&quot;/blog/marionette-act-i-automation/&quot;&gt;Act I&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#867&quot;&gt;Adding the tests we want&lt;/a&gt; to the runner’s to-run list (&lt;code class=&quot;highlighter-rouge&quot;&gt;self.tests&lt;/code&gt;) is the next step. This means &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#964-1021&quot;&gt;finding&lt;/a&gt; the appropriate tests from test modules, a directory containing test modules, or a manifest file listing tests and the conditions under which they should be run.&lt;/p&gt;

&lt;p&gt;Given those tests, after  &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#869-880&quot;&gt;gathering&lt;/a&gt; and &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#882-888&quot;&gt;logging&lt;/a&gt; some info about the settings we’re using, we’re ready to &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#897&quot;&gt;run&lt;/a&gt;! (&lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#892-898&quot;&gt;Perhaps multiple times&lt;/a&gt;,  if repeated runs were requested.)&lt;/p&gt;

&lt;p&gt;To actually run the tests, the runner calls   &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1082-1099&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run_test_sets&lt;/code&gt;&lt;/a&gt;, which runs the tests we added earlier, possibly dividing them into several sets (or &lt;code class=&quot;highlighter-rouge&quot;&gt;chunks&lt;/code&gt;) that will be run separately (thus enabling parallelization). This in turn calls &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1072-1080&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run_test_set&lt;/code&gt;&lt;/a&gt;, which basically just calls &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1023-1070&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run_test&lt;/code&gt;&lt;/a&gt;, which is the &lt;a href=&quot;https://en.wikipedia.org/wiki/Turtles_all_the_way_down&quot;&gt;final turtle&lt;/a&gt;.&lt;sup id=&quot;a3&quot;&gt;&lt;a href=&quot;#f3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Glancing at &lt;code class=&quot;highlighter-rouge&quot;&gt;run_test&lt;/code&gt;, we can see how the Marionette harness is &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1025-1026&quot;&gt;based&lt;/a&gt; on Python’s &lt;a href=&quot;https://docs.python.org/2/library/unittest.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt;&lt;/a&gt;, which is why the tests we run with this harness basically look like &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt; tests (we’ll say a bit more about that below). Using &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt; to &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1041&quot;&gt;discover&lt;/a&gt; our test cases in the modules we provided, &lt;code class=&quot;highlighter-rouge&quot;&gt;run_test&lt;/code&gt; &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1050-1051&quot;&gt;runs&lt;/a&gt; each test using a &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#217&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteTextTestRunner&lt;/code&gt;&lt;/a&gt; and gets back a &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#61&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteTestResult&lt;/code&gt;&lt;/a&gt;. These are basically Marionette-specific versions of classes from &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/mozbase/moztest&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;moztest&lt;/code&gt;&lt;/a&gt;, which helps us store the test results in a format that’s compatible with other Mozilla automation tools, like &lt;a href=&quot;https://wiki.mozilla.org/Auto-tools/Projects/Treeherder&quot;&gt;Treeherder&lt;/a&gt;. Once we’ve got the test result, &lt;code class=&quot;highlighter-rouge&quot;&gt;run_test&lt;/code&gt; simply &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1053-1066&quot;&gt;adds it to the runner’s tally&lt;/a&gt; of test successes/failures.&lt;/p&gt;

&lt;p&gt;So, that’s how &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt; (and its helper functions) execute the tests. Once all the tests have been run, our main &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt; method basically just &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#911-913,921&quot;&gt;logs some info&lt;/a&gt; about how things went, and which tests passed. After that, the runner &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#927&quot;&gt;cleans up&lt;/a&gt; by &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#1101-1112&quot;&gt;shutting down Marionette and the browser&lt;/a&gt;, even if something &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#904-908,922-925&quot;&gt;went wrong&lt;/a&gt; during the running or logging, or if the user &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/runner/base.py#899-903,929-931&quot;&gt;interrupted&lt;/a&gt; the tests.&lt;/p&gt;

&lt;p&gt;So there we have it: our very own Marionette-centric test-runner! It runs our tests with Marionette and Firefox set up however we want, and also gives us control over more general things like logging and test chunking. In the next section, we’ll take a look at how we can interact with and customize the runner, and tell it how we want our tests run.&lt;/p&gt;

&lt;h3 id=&quot;what-do-the-tests-look-like&quot;&gt;What do the tests look like?&lt;/h3&gt;

&lt;p&gt;As for the tests themselves, since the Marionette harness is an extension of Python’s &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt;, tests are mostly written as a custom flavor of &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt; test cases. Tests extend &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/3ba5426a03b495b6417fffb872d42874edb80855/testing/marionette/harness/marionette/marionette_test.py#617&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteTestCase&lt;/code&gt;&lt;/a&gt;, which is an extension of &lt;a href=&quot;https://docs.python.org/2/library/unittest.html#unittest.TestCase&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unittest.TestCase&lt;/code&gt;&lt;/a&gt;. So if you need to write a new test using Marionette, it’s as simple as writing a new test module named &lt;code class=&quot;highlighter-rouge&quot;&gt;test_super_awesome_things.py&lt;/code&gt; which extends that class with whatever &lt;code class=&quot;highlighter-rouge&quot;&gt;test_*&lt;/code&gt; methods you want – just like with vanilla &lt;a href=&quot;https://docs.python.org/2/library/unittest.html#basic-example&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unittest&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Let’s take a look at a simple example, &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/harness/marionette/tests/unit/test_checkbox.py&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;test_checkbox.py&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;marionette&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MarionetteTestCase&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;marionette_driver.by&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;By&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestCheckbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MarionetteTestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_selected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;test_html&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;marionette&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;absolute_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;marionette&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;box&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;marionette&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;By&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;myCheckBox&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_selected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_selected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This and the other Marionette unit tests can be found in the directory  &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/harness/marionette/tests/unit/&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;testing/marionette/harness/marionette/tests/unit/&lt;/code&gt;&lt;/a&gt;, so have a peek there for some more examples.&lt;/p&gt;

&lt;p&gt;Once we’ve got our super awesome new test, we can run it (with whatever super awesome settings we want) using the harness’s command-line interface. Let’s take a look at how that interface works.&lt;/p&gt;

&lt;h3 id=&quot;what-is-the-interface-to-the-harness-like&quot;&gt;What is the interface to the harness like?&lt;/h3&gt;

&lt;p&gt;Let’s peek at the &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runner/base.py#496-582&quot;&gt;constructor method&lt;/a&gt; for the &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteTestRunner&lt;/code&gt; class:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BaseMarionetteTestRunner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# ...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;binary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logdir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testvars&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;symbols_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shuffle_seed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;this_chunk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_chunks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;server_root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gecko_log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result_callbacks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prefs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_tags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;socket_timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BaseMarionetteArguments&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;socket_timeout_default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;startup_timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addons&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;workspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;verbose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e10s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emulator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;!--** --&gt;

&lt;p&gt;Our first thought might be, “Wow, that’s a lot of arguments”. Indeed! This is how the runner knows how you want the tests to be run. For example, &lt;code class=&quot;highlighter-rouge&quot;&gt;binary&lt;/code&gt; is the path to the specific Firefox application binary you want to use, and &lt;code class=&quot;highlighter-rouge&quot;&gt;e10s&lt;/code&gt; conveys whether or not you want to run Firefox with multiple processes.&lt;/p&gt;

&lt;p&gt;Where do all these arguments come from? They’re &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runtests.py#67&quot;&gt;passed&lt;/a&gt; to the runner by &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteHarness&lt;/code&gt;, which &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runtests.py#51-52&quot;&gt;gets them&lt;/a&gt; from the &lt;em&gt;argument parser&lt;/em&gt; we mentioned earlier, &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runtests.py#24-27&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteArguments&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Analogous to &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteTestRunner&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteTestRunner&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteArgument&lt;/code&gt; is just a small wrapper around &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteArguments&lt;/code&gt; from &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runner/base.py#241&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;runner/base.py&lt;/code&gt;&lt;/a&gt;, which in turn is just an extension of Python’s &lt;a href=&quot;https://docs.python.org/2/library/argparse.html#argparse.ArgumentParser&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;argparse.ArgumentParser&lt;/code&gt;&lt;/a&gt;. &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteArguments&lt;/code&gt; defines which &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runner/base.py#254-373&quot;&gt;arguments&lt;/a&gt; can be passed in to the harness’s &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runtests.py#72-92&quot;&gt;command-line interface&lt;/a&gt; to configure its settings. It also &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runner/base.py#419&quot;&gt;verifies&lt;/a&gt; that whatever arguments the user passed in make sense and don’t contract each other.&lt;/p&gt;

&lt;p&gt;To actually &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Marionette_Test_Runner&quot;&gt;use the harness&lt;/a&gt;, we can simply call the &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/harness/marionette/runtests.py&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;runtests.py&lt;/code&gt;&lt;/a&gt; script with: &lt;code class=&quot;highlighter-rouge&quot;&gt;python runtests.py [whole bunch of awesome arguments]&lt;/code&gt;. Alternatively, we can use the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/mach&quot;&gt;Mach command&lt;/a&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;marionette-test&lt;/code&gt; (which just calls &lt;code class=&quot;highlighter-rouge&quot;&gt;runtests.py&lt;/code&gt;), as described &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/Running_Tests&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To see all of the available command-line options (there are a lot!), you can run &lt;code class=&quot;highlighter-rouge&quot;&gt;python runtests.py --help&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;./mach marionette-test --help&lt;/code&gt;, which just spits out the arguments and their descriptions as defined in &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/testing/marionette/harness/marionette/runner/base.py#254-373&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteArguments&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So, with the simple command &lt;code class=&quot;highlighter-rouge&quot;&gt;mach marionette-test [super fancy arguments] test_super_fancy_things.py&lt;/code&gt;, you can get the harness to run your Marionette tests with whatever fancy options you desire to fit your specific fancy scenario.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://media.tenor.co/images/532d794fb57c2b1bfbcedef396e93ce1/raw&quot; alt=&quot;&amp;quot;I'm so fancy&amp;quot; (GIF from &amp;quot;Fancy&amp;quot; by Iggy Azalea)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;Iggy Azalea's &quot;Fancy&quot; via &lt;a href=&quot;https://www.tenor.co/view/fancy-iggyazalea-gif-4448714&quot;&gt;tenor&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But what if you’re extra fancy, and have testing needs that exceed the limits of what’s possible with the (copious) command-line options you can pass to the Marionette runner? Worry not! You can customize the runner even further by extending the base classes and making your own super-fancy harness. In the next section, we’ll see how and why you might do that.&lt;/p&gt;

&lt;h2 id=&quot;how-is-the-marionette-test-harness-used-at-mozilla&quot;&gt;How is the Marionette test harness used at Mozilla?&lt;/h2&gt;

&lt;p&gt;Other than enabling people to write and run their own tests using the Marionette client, what is the Marionette harness for? How does Mozilla use it internally?&lt;/p&gt;

&lt;p&gt;Well, first and foremost, the harness is used to run the Marionette Python unit tests we described earlier, which check that Marionette is functioning as expected (e.g. if Marionette tells the browser to check that box, then by golly that box better get checked!). Those are the tests that will get run if you just run &lt;code class=&quot;highlighter-rouge&quot;&gt;mach marionette-test&lt;/code&gt; without specifying any test(s) in particular.&lt;/p&gt;

&lt;p&gt;But that’s not all! I mentioned above that there might be special cases where the runner’s functionality needs to be extended, and indeed Mozilla has already encountered this scenario a couple of times.&lt;/p&gt;

&lt;p&gt;One example is the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Firefox_UI_tests&quot;&gt;Firefox UI tests&lt;/a&gt;, and in particular the UI update tests. These test the functionality of e.g. clicking the “Update Firefox” button in the UI, which means they need to do things like compare the old version of the application to the updated one to make sure that the update worked. Since this involves binary-managing superpowers that the base Marionette harness doesn’t have, the UI tests have their own runner, &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/firefox-ui/harness/firefox_ui_harness/runners/base.py&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;FirefoxUITestRunner&lt;/code&gt;&lt;/a&gt;, which extends &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteTestRunner&lt;/code&gt; with those superpowers.&lt;/p&gt;

&lt;p&gt;Another test suite that makes use of a superpowered harness is the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/external-media-tests&quot;&gt;External Media Tests&lt;/a&gt;, which tests video playback in Firefox and need some extra resources – namely a list of video URLs to make available to the tests. Since there’s no easy way to make such resources available to tests using the base Marionette harness, the external media tests have &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/dom/media/test/external/external_media_harness/runtests.py&quot;&gt;their own test harness&lt;/a&gt; which uses the custom &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/external-media-tests&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MediaTestRunner&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/rev/d5f20820c80514476f596090292a5d77c4b41e3b/dom/media/test/external/external_media_harness/runtests.py#49&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MediaTestArguments&lt;/code&gt;&lt;/a&gt; (extensions of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteTestRunner&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteArguments&lt;/code&gt;, respectively), to allow the user to e.g. specify the video resources to use via the command line.&lt;/p&gt;

&lt;p&gt;So the Marionette harness is used in at least three test suites at Mozilla, and more surely can and will be added as the need arises! Since the harness is designed with automation in mind, suites like &lt;code class=&quot;highlighter-rouge&quot;&gt;marionette-test&lt;/code&gt; and the Firefox UI tests can be (and are!) run automatically to make sure that developers aren’t breaking Firefox or Marionette as they make changes to the Mozilla codebase. This all makes the Marionette harness a rather indispensable development tool.&lt;/p&gt;

&lt;p&gt;Which brings us to a final thought…&lt;/p&gt;

&lt;h2 id=&quot;how-do-we-know-that-the-harness-itself-is-running-tests-properly&quot;&gt;How do we know that the harness itself is running tests properly?&lt;/h2&gt;

&lt;p&gt;The Marionette harness, like any test harness, is just another piece of software. It was written by humans, which means that bugs and breakage are always a possibility. Since breakage or bugs in the test harness could prevent us from running tests properly, and we need those tests to work on Firefox and other Mozilla tools, we need to make sure that they get caught!&lt;/p&gt;

&lt;p&gt;Do you see where I’m going with this? We need to… wait for it…&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Test the thing that runs the tests&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yup, that’s right: Meta-testing. Test-ception. Tests all the way down.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://media1.popsugar-assets.com/files/thumbor/mQHBZmHnmyaKD5KDQ3Pczk6iM4E/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2015/07/21/936/n/1922283/2213f04074cccfc3_raw/i/When-You-Realize-Youre-Getting-Security-Deposit-Back-From-Your-Lease.gif&quot; alt=&quot;&amp;quot;Oh my god&amp;quot; (GIF from the film &amp;quot;Clueless&amp;quot;)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;&lt;em&gt;Clueless&lt;/em&gt; via &lt;a href=&quot;http://www.popsugar.com/entertainment/Clueless-Movie-GIFs-37943154&quot;&gt;POPSUGAR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And that’s what I’ve been doing this summer for my &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner&quot;&gt;Outreachy project&lt;/a&gt;: working on the tests for the Marionette test harness, otherwise known as the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/Developer_setup#Marionette_Harness_Unit_Tests&quot;&gt;Marionette harness (unit) tests&lt;/a&gt;. I wrote a bit about what I’ve been up to in my &lt;a href=&quot;/blog/outreachy-halftime-ish-update/&quot;&gt;previous post&lt;/a&gt;, but in my next and final Outreachy post, I’ll explain in more detail what the harness tests do, how we run them in automation, and what improvements I’ve made to them during my time as a Mozilla contributor.&lt;/p&gt;

&lt;p&gt;Stay tuned!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://media2.popsugar-assets.com/files/thumbor/fvDfv9zE69Mw1HJJtn4veTLo6BQ/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2015/07/21/935/n/1922283/3c71c918ce03dcce_tumblr_lv6o35jlkv1qb9pa3o1_500/i/When-Youre-Dinner-Weeknight-You-Realize-8-pm.gif&quot; alt=&quot;&amp;quot;I'm outty&amp;quot; (GIF from the film &amp;quot;Clueless&amp;quot;)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;&lt;em&gt;Clueless&lt;/em&gt; via &lt;a href=&quot;http://www.popsugar.com/entertainment/Clueless-Movie-GIFs-37943154&quot;&gt;POPSUGAR&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;notes&quot;&gt;Notes&lt;/h4&gt;

&lt;p&gt;&lt;b id=&quot;f1&quot;&gt;1&lt;/b&gt; Or &lt;a href=&quot;https://www.mozilla.org/en-US/firefox/android/&quot;&gt;Fennec&lt;/a&gt;, or &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/B2G_OS&quot;&gt;B2G&lt;/a&gt;, or [insert &lt;a href=&quot;https://en.wikipedia.org/wiki/Gecko_(software)#Usage&quot;&gt;Gecko-based project&lt;/a&gt; here]… &lt;a href=&quot;#a1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f2&quot;&gt;2&lt;/b&gt; If you scroll through it and think, “Wow, that’s long and ugly”, well, you should’ve seen it before I &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1275269&quot;&gt;refactored&lt;/a&gt; it!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://media3.popsugar-assets.com/files/thumbor/fc9xotgGrHFZI0W6fUakt4MC2Ug/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2015/07/21/935/n/1922283/0151951e7852f4d2_hagsville/i/When-You-Look-Your-High-School-Enemies-Facebook-Pages.gif&quot; alt=&quot;&amp;quot;Hagsville&amp;quot; (GIF from the film &amp;quot;Clueless&amp;quot;)&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;credit&quot;&gt;&lt;em&gt;Clueless&lt;/em&gt; via &lt;a href=&quot;http://www.popsugar.com/entertainment/Clueless-Movie-GIFs-37943154&quot;&gt;POPSUGAR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;#a2&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f3&quot;&gt;3&lt;/b&gt; If you think distinguishing &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;run_test_sets&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;run_test_set&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;run_test&lt;/code&gt; is confusing, I wholeheartedly agree with you! But best get used to it; working on the Marionette test harness involves developing an eagle-eye for plurals in method names (we’ve also got &lt;code class=&quot;highlighter-rouge&quot;&gt;_add_tests&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;add_test&lt;/code&gt;). &lt;a href=&quot;#a3&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>Fabric provides interactive object model on top of canvas element
Fabric also has SVG-to-canvas (and canvas-to-SVG) parser</summary></entry><entry><title>testing 1</title><link href="/blog/outreachy-halftime-ish-update/" rel="alternate" type="text/html" title="testing 1" /><published>2016-08-02T00:00:00-07:00</published><updated>2016-08-02T00:00:00-07:00</updated><id>/blog/outreachy-halftime-ish-update</id><content type="html" xml:base="/blog/outreachy-halftime-ish-update/">&lt;p&gt;It feels like yesterday that I &lt;a href=&quot;/blog/outreachy-what-how-why/&quot;&gt;started my Outreachy internship&lt;/a&gt;, but it was actually over 2 months ago! For the last couple of weeks I’ve been on Outreachy hiatus because of &lt;a href=&quot;https://ep2016.europython.eu/en/&quot;&gt;EuroPython&lt;/a&gt;, moving from &lt;a href=&quot;https://goo.gl/maps/Rp7qp5Dvg5C2&quot;&gt;Saarbrücken to Berlin&lt;/a&gt;, and my mentor being on vacation. Now I’m back, with 6 weeks left in my internship! So it seems like a good moment to check in and reflect on how things have been going so far, and what’s in store for the rest of my time as an Outreachyee.&lt;/p&gt;

&lt;h2 id=&quot;what-have-i-been-up-to&quot;&gt;What have I been up to?&lt;/h2&gt;

&lt;h3 id=&quot;learning-how-to-do-the-work&quot;&gt;Learning how to do the work&lt;/h3&gt;

&lt;p&gt;In the rather involved application process for Outreachy, I already had to spend quite a bit of time figuring out the process for making even the tiniest contribution to the Mozilla codebase. But obviously one can’t learn everything there is to know about a project within a couple of weeks, so a good chunk of my Outreachy time so far was spent on getting better acquainted with:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;The tools&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;I’ve already written about my learning experiences with &lt;a href=&quot;/blog/warming-up-to-mercurial/&quot;&gt;Mercurial&lt;/a&gt;, but there were a lot of other components of the Mozilla development process that I had to learn about (and am still learning about), such as &lt;a href=&quot;https://bugzilla.mozilla.org/&quot;&gt;Bugzilla&lt;/a&gt;, &lt;a href=&quot;http://mozilla-version-control-tools.readthedocs.io/en/latest/mozreview.html&quot;&gt;MozReview&lt;/a&gt;, &lt;a href=&quot;https://wiki.mozilla.org/EngineeringProductivity/Projects/Treeherder&quot;&gt;Treeherder&lt;/a&gt;, &lt;a href=&quot;https://wiki.mozilla.org/ReleaseEngineering/TryServer&quot;&gt;Try&lt;/a&gt;, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/mach&quot;&gt;Mach&lt;/a&gt;…
Then, since the project I’m working focuses on testing, I had to grok things like &lt;a href=&quot;http://docs.pytest.org/en/latest/&quot;&gt;Pytest&lt;/a&gt; and &lt;a href=&quot;https://docs.python.org/3/library/unittest.mock.html&quot;&gt;Mock&lt;/a&gt;. Since most everything I’m doing is in Python, I’ve also been picking up useful Python tidbits here and there.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;The project&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;My internship project, &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner&quot;&gt;“Test-driven refactoring of Marionette’s Python test runner”&lt;/a&gt;, relates to a component of the Marionette project, which encompasses a lot of moving parts. Even figuring out what Marionette is, what components it comprises, how these interrelate, and which of them I need to know about, was a non-trivial task. That’s why I’m writing a couple of posts about the project itself - &lt;a href=&quot;/blog/marionette-act-i-automation/&quot;&gt;one down&lt;/a&gt;, one to go - to crystallize what I’ve learned and hopefully make it a little easier for other people to get through the what-even-is-it steps that I’ve been going through. This post is a sort of “intermission”, so stay tuned for my upcoming post on the Marionette test runner and harness!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;doing-the-work&quot;&gt;Doing the work&lt;/h3&gt;

&lt;p&gt;Of course, there’s a reason I’ve been trying to wrap my head around all the stuff I just mentioned: so that I can actually do this project! So what is the actual work I’ve been doing, i.e. my overall contribution to Mozilla as an Outreachy intern?&lt;/p&gt;

&lt;p&gt;Well, to quote the &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner&quot;&gt;project description&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;we’re testing the thing that runs Firefox tests&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The “thing” is the Marionette test runner, a tool written in Python that allows us to run tests that make use of &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;Marionette&lt;/a&gt; to automate the browser. It’s responsible for things like discovering which tests we need to run, setting up all the necessary prerequisites, running the tests one by one, and logging all of the results.&lt;/p&gt;

&lt;p&gt;Since the test runner is essentially a program like any other, it can be broken just like any other! And since it’s used in automation to run the tests that let Firefox developers know if some new change they’ve introduced breaks something, if the test runner itself breaks, that could cause a lot of problems. So what do we do? We test it!&lt;/p&gt;

&lt;p&gt;That’s where I come in. My mentor, Maja, had started writing some unit tests for the test runner before the internship began. My job is basically to add more tests. This involves:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Reading &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/harness/marionette/runner/base.py&quot;&gt;the code&lt;/a&gt; to identify things that could break and cause problems, and thus should be tested&lt;/li&gt;
  &lt;li&gt;Writing &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1275288&quot;&gt;new&lt;/a&gt; &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1276974&quot;&gt;unit&lt;/a&gt; &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1287591#c4&quot;&gt;tests&lt;/a&gt; using Pytest&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1275269&quot;&gt;Refactoring&lt;/a&gt; the code to make it easier to test, more readable, easier to extend/change, or otherwise better&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Aside from the testing side of things, another aspect of the project (which I particularly enjoy) involves improving how the runner relates to the rest of the world. For example, improving the &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1237958&quot;&gt;command line interface&lt;/a&gt; to the runner, or making sure the unit tests for the runner are producing &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1285299&quot;&gt;logs&lt;/a&gt; that play nicely with the rest of the Mozilla ecosystem.&lt;/p&gt;

&lt;h3 id=&quot;writing-stuff-down&quot;&gt;Writing stuff down&lt;/h3&gt;

&lt;p&gt;As you can see, I’ve also been spending a fair bit of time writing blog &lt;a href=&quot;/blog/outreachy-what-how-why/&quot;&gt;p&lt;/a&gt;&lt;a href=&quot;/blog/warming-up-to-mercurial/&quot;&gt;o&lt;/a&gt;&lt;a href=&quot;/blog/i-want-to-mock-with-you/&quot;&gt;s&lt;/a&gt;&lt;a href=&quot;/blog/mozilla-london-all-hands-2016/&quot;&gt;t&lt;/a&gt;&lt;a href=&quot;/blog/marionette-act-i-automation/&quot;&gt;s&lt;/a&gt; about what I’ve been learning and encountering over the course of my internship. Hopefully these have been or will be useful to others who might also be wrapping their heads around these things for the first time. But regardless, writing them has certainly been useful for me!&lt;/p&gt;

&lt;h2 id=&quot;whats-been-fun&quot;&gt;What’s been fun?&lt;/h2&gt;

&lt;h3 id=&quot;learning-all-the-things&quot;&gt;Learning all the things&lt;/h3&gt;

&lt;p&gt;While working with a new system or technology can often be frustrating, especially when you’re used to something similar-but-not-quite-the-same (ahem, &lt;a href=&quot;/blog/warming-up-to-mercurial/&quot;&gt;git and hg&lt;/a&gt;), I’ve found that the frustration does subside (or at least lessen) eventually, and in its place you find not only the newfound ease of working with the new thing, but also the gratification that comes with the realization: “Hey! I learned the thing!” This makes the overall experience of grappling with the learning curve fun, in my experience.&lt;/p&gt;

&lt;h3 id=&quot;working-remotely&quot;&gt;Working remotely&lt;/h3&gt;

&lt;p&gt;This internship has been my first experience with a lifestyle that always attracted me: working remotely. I love the freedom of being able to work from home if I have things to take care of around the house, or at a cafe if I just really need to sip on a Chocolate Chai Soy Latte right now, or from the public library if I want some peace &amp;amp; quiet. I also loved being able to escape Germany for 2 weeks to visit my boyfriend’s family in Italy, or to work a day out of the Berlin office if I’m there for a long weekend looking at apartments. Now that I’ve moved to Berlin, I love the option of working out of the office here if I want to, or working from home or a cafe if I have things I need to take care of on the other side of the city. And because the team I’m working on is also completely distributed, there’s a great infrastructure already in place (IRC, video conferences, collaborative documents) to enable us to work in completely different countries/time zones and still feel connected.&lt;/p&gt;

&lt;h3 id=&quot;helping-others-get-started-contributing&quot;&gt;Helping others get started contributing!&lt;/h3&gt;

&lt;p&gt;A couple of weeks ago I got to mentor my first bug on Bugzilla, and help someone else get started contributing to the thing that I had gotten started contributing to a few months ago for my Outreachy internship. Although it was a pretty simple &amp;amp; trivial thing, it felt great to help someone else get involved, and to realize I knew the answers to a couple of their questions, meaning that I’m actually already involved! That’s the kind of thing that really makes me want to continue working with FOSS projects after my internship ends, and makes me so appreciative of initiatives like Outreachy that help bring newcomers like me into this community.&lt;/p&gt;

&lt;h2 id=&quot;whats-been-hard&quot;&gt;What’s been hard?&lt;/h2&gt;

&lt;h3 id=&quot;impostor-syndrome&quot;&gt;Impostor Syndrome&lt;/h3&gt;

&lt;p&gt;The flip side of the learning-stuff fun is that, especially at the beginning, ye olde Impostor Syndrome gets to run amok. When I started my internship, I had the feeling that I had Absolutely No Idea what I was doing – over the past couple of months it has gotten gradually better, but I still have the feeling that I have a Shaky and Vague Idea of what I’m doing. From my communications with other current/former Outreachy interns, this seems to be par for the course, and I suppose it’s par for the course for anyone joining a new project or team for the first time. But even if it’s normal, it’s still there, and it’s still hard.&lt;/p&gt;

&lt;h3 id=&quot;working-remotely-1&quot;&gt;Working remotely&lt;/h3&gt;

&lt;p&gt;As I mentioned, overall I’ve been really enjoying the remote-work lifestyle, but it does have its drawbacks. When working from home, I find it incredibly difficult to separate my working time from my not-working time, which is most often manifested in my complete inability to stop working at the end of the day. Because I don’t have to physically walk away from my computer, at the end of the day I think “Oh, I’ll just do that one last thing,” and the next thing I know the Last Thing has led to 10 other Last Things and now it’s 11:00pm and I’ve been working for 13 hours straight. Not healthy, not fun. Also, while the flexibility and freedom of not having a fixed place of work is great, moving around (e.g. from Germany to Italy to other side of Germany) can also be chaotic and stressful, and can make working (productively) more difficult – especially if you’re not sure where your next internet is going to come from. So the remote work thing is really a double-edged sword, and doing in a way that preserves both flexibility and stability is clearly a balancing act that takes some practice. I’m working on it.&lt;/p&gt;

&lt;h3 id=&quot;measuring-productivity&quot;&gt;Measuring productivity&lt;/h3&gt;

&lt;p&gt;Speaking of working productively, how do you know when you’re doing it? Is spending a whole day reading about mock objects, or writing a blog post, or banging your head against a build failure, or [insert activity that is not writing 1000 lines of code] productive? The nature of the Outreachy system is that every project is different, and the target outcomes (or lack thereof) are determined by the project mentor, and whether or not your work is satisfactory is entirely a matter of their judgment. Luckily, my mentor is extremely fair, open, clear, and realistic about her goals for the project. She’s also been very reassuring when I’ve expressed uncertainty about productivity, and forthcoming about her satisfaction with my progress. But I feel like this is just my good luck having a mentor who a) is awesome and b) was an Outreachy intern herself once, and can thus empathize. I do wonder how my experience would be different, especially from the standpoint of knowing whether I’m measuring up to expectations, if I were on a different project with a different mentor. Which brings me to…&lt;/p&gt;

&lt;h2 id=&quot;whats-been-helpful&quot;&gt;What’s been helpful?&lt;/h2&gt;

&lt;h3 id=&quot;having-a-fantastic-mentor&quot;&gt;Having a fantastic mentor&lt;/h3&gt;

&lt;p&gt;As I’ve just said, I feel really lucky to be working with my mentor, Maja. She’s been an incredible support throughout the internship, and has just made it a great experience. I’m really thankful for her for being so detailed &amp;amp; thorough in her initial conception of the project and instructions to me, and for being so consistently responsive and helpful with any of my questions or concerns. I can’t imagine a better mentor.&lt;/p&gt;

&lt;h3 id=&quot;being-part-of-a-team&quot;&gt;Being part of a team&lt;/h3&gt;

&lt;p&gt;“It takes a village,” or whatever they say, and my village is the Automation crew (who hang out in &lt;a href=&quot;irc://irc.mozilla.org/#automation&quot;&gt;#automation&lt;/a&gt; on IRC) within the slightly-larger village of the Engineering Productivity team (A-Team) (&lt;a href=&quot;irc://irc.mozilla.org/#ateam&quot;&gt;#ateam&lt;/a&gt;). Just like my mentor, the rest of the crew and the team have also been really friendly and helpful to me so far. If Maja’s not there, if I’m working on some adjacent component, or if I have some general question, they’ve been there for me. And while having a fantastic mentor is fantastic, having a fantastic mentor within a fantastic team is double-fantastic, because it helps with the hard things like learning new tools or working remotely (especially when your mentor is in a different time zone, but other team members are in yours). So I’m also really grateful to the whole team for taking me in and treating me as one of their own.&lt;/p&gt;

&lt;h3 id=&quot;attending-the-all-hands&quot;&gt;Attending the All Hands&lt;/h3&gt;

&lt;p&gt;Apparently, at some point in the last couple of years, someone at Mozilla decided to start including Outreachy interns in the semi-annual All Hands meetings. Whoever made that decision: please accept my heartfelt thanks. Being included in the &lt;a href=&quot;/blog/mozilla-london-all-hands-2016/&quot;&gt;London All Hands&lt;/a&gt; made a real difference - not only because I understood a lot about various components of the Mozilla infrastructure that had previously been confusing or unclear to me, but also because the chance to meet and socialize with team members and other Outreachy interns face-to-face was a huge help in dealing with e.g. Impostor Syndrome and the challenges of working on a distributed team. I’m so glad I was able to join that meeting, because it really helped me feel more bonded to both Mozilla as a whole and to my specific team/project, and I hope for the sake of both Mozilla and Outreachy that Outreachyees continue to be invited to such gatherings.&lt;/p&gt;

&lt;h3 id=&quot;intern-solidarity&quot;&gt;Intern solidarity&lt;/h3&gt;

&lt;p&gt;Early on in the internship, one of the other Mozilla Outreachy interns started a channel just for us on Mozilla’s IRC. Having a “safe space” to check in with the other interns, ask “dumb” questions, express insecurities/frustrations, and just generally support each other is immensely helpful. On top of that, several of us got to hang out in person at the London All Hands meeting, which was fantastic. Having contact with a group of other people going through more or less the same exciting/bewildering/overwelming/interesting experience you are is invaluable, especially if you suffer from Impostor Syndrome as so many of us do. So I’m so grateful to the other interns for their support and solidarity.&lt;/p&gt;

&lt;h2 id=&quot;whats-up-next&quot;&gt;What’s up next?&lt;/h2&gt;

&lt;p&gt;In the remaining weeks of my internship, I’m going to be continuing the work I mentioned, but instead of from a library in a small German town or a random internet connection in a small Italian town, I’ll be working mainly out of the Berlin office, and hopefully getting to know more Mozillians here. I’ll also be participating in the &lt;a href=&quot;https://wiki.mozilla.org/TechSpeakers&quot;&gt;TechSpeakers&lt;/a&gt; program, a training program from the Mozilla Reps to improve your public speaking skills so that you can go forth and spread the word about Mozilla’s awesome technologies. Finally, in the last week or two, I’ll be figuring out how to pass the baton, i.e. tie up loose ends, document what I’ve done and where I’m leaving off, and make it possible for someone else – whether existing team or community members, or perhaps the next intern – to continue making the Marionette test runner and its unit tests Super Awesome. And blogging all the while, of course. :) Looking forward to it!&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>It feels like yesterday that I started my Outreachy internship, but it was actually over 2 months ago! For the last couple of weeks I’ve been on Outreachy hiatus because of EuroPython, moving from Saarbrücken to Berlin, and my mentor being on vacation. Now I’m back, with 6 weeks left in my internship! So it seems like a good moment to check in and reflect on how things have been going so far, and what’s in store for the rest of my time as an Outreachyee.</summary></entry><entry><title>Testing 2</title><link href="/blog/marionette-act-i-automation/" rel="alternate" type="text/html" title="Testing 2" /><published>2016-07-08T00:00:00-07:00</published><updated>2016-07-08T00:00:00-07:00</updated><id>/blog/marionette-act-i-automation</id><content type="html" xml:base="/blog/marionette-act-i-automation/">&lt;p&gt;As you &lt;a href=&quot;/blog/outreachy-what-how-why/&quot;&gt;may already know&lt;/a&gt;, I’m spending my summer interning with Mozilla’s &lt;a href=&quot;https://wiki.mozilla.org/EngineeringProductivity&quot;&gt;Enginering Productivity&lt;/a&gt; team through the &lt;a href=&quot;https://gnome.org/outreachy&quot;&gt;Outreachy&lt;/a&gt; program. Specifically, the project I’m working on is called &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner_.5Bno_longer_taking_applicants.5D&quot;&gt;Test-driven Refactoring of Marionette’s Python Test Runner&lt;/a&gt;. But what exactly does that mean? What is Marionette, and what does it have to do with testing?&lt;/p&gt;

&lt;p&gt;In this two-part series, I’d like to share a bit of what I’ve learned about the Marionette project, and how its various components help us test Firefox by allowing us to automatically control the browser from within. Today, in Act I, I’ll give an overview of how the Marionette server and client make the browser our puppet. Later on, in Act II, I’ll describe how the Marionette test harness and runner make automated testing a breeze, and let you in on the work I’m doing on the Marionette test runner for my internship.&lt;/p&gt;

&lt;p&gt;And since we’re talking about puppets, you can bet there’s going to be a hell of a lot of &lt;a href=&quot;http://www.imdb.com/title/tt0120601/&quot;&gt;&lt;em&gt;Being John Malkovich&lt;/em&gt;&lt;/a&gt; references. Consider yourself warned!&lt;/p&gt;

&lt;!--/excerpt--&gt;

&lt;h2 id=&quot;how-do-you-test-a-browser&quot;&gt;How do you test a browser?&lt;/h2&gt;

&lt;p&gt;On the one hand, you probably want to make sure that the browser’s interface, or &lt;em&gt;chrome&lt;/em&gt;, is working as expected; that users can, say, open and close tabs and windows, type into the search bar, change preferences and so on. But you probably also want to test how the browser displays the actual web pages, or &lt;em&gt;content&lt;/em&gt;, that you’re trying to, well, browse; that users can do things like click on links, interact with forms, or play video clips from their favorite movies.&lt;/p&gt;

&lt;iframe width=&quot;420&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/LU19Rqy1s9Y&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;p class=&quot;caption&quot;&gt;Because let's be honest, that's like 96% of the point of the internet right there, no?&lt;/p&gt;

&lt;p&gt;These two parts, chrome and content, are the main things the browser has to get right. So how do you test them?&lt;/p&gt;

&lt;p&gt;Well, you could launch the browser application, type “Being John Malkovich” into the search bar and hit enter, check that a page of search results appears, click on a YouTube link and check that it takes you to a new page and starts playing a video, type “I ❤️ Charlie Kaufman and Spike Jonze” into the comment box and press enter, check that it submits the text…&lt;/p&gt;

&lt;p&gt;And when you’re done, you could write up a report about what you tested, what worked and what didn’t, and what philosophical discoveries about the nature of identity and autonomy you made along the way.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://67.media.tumblr.com/tumblr_lzoteetytB1r7xg3oo1_1280.png&quot; alt=&quot;Still from the film &amp;quot;Being John Malkovich&amp;quot; in which a marionette puppet regards itself in a mirror&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;Am &lt;em&gt;I&lt;/em&gt; the puppet? AM I?&lt;br /&gt;
&lt;span class=&quot;credit&quot;&gt;&lt;em&gt;Being John Malkovich&lt;/em&gt; via &lt;a href=&quot;http://lecoada.tumblr.com/post/17940837987/hysterically-dramatic-puppetry-in-being-john&quot;&gt;COADA on Tumblr&lt;/a&gt;&lt;/span&gt;
&lt;/p&gt;

&lt;p&gt;Now, while this would be fun, if you have to do it a million times it would be less fun, and your boss might think that it is not fun at all that it takes you an entire developer-hour to test one simple interaction and report back.&lt;/p&gt;

&lt;p&gt;Wouldn’t it be better if we could magically automate the whole thing? Maybe something like:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;magical_automated_browser&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;client&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://www.youtube.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;By&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;search-bar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Being John Malkovich&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;By&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;search-button&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# etc., etc.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;SPOILER ALERT: We can, thanks to the Marionette project!&lt;/p&gt;

&lt;h2 id=&quot;what-is-marionette&quot;&gt;What is Marionette?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;Marionette&lt;/a&gt; refers to a suite of tools for automated testing of Mozilla browsers. One important part of the project is an automation framework for Gecko, the engine that powers Firefox. The automation side of Marionette consists of the Marionette server and client, which work together to make the browser your puppet: they give you a nice, simple little wooden handle with which you can pull a bunch of strings, which are tied to the browser internals, to make the browser and the content it’s displaying do whatever you want. The &lt;code class=&quot;highlighter-rouge&quot;&gt;client.do_stuff&lt;/code&gt; code above isn’t even an oversimplification; that’s exactly how easy it becomes to control the browser using Marionette’s client and server. Pretty great right?&lt;/p&gt;

&lt;p&gt;But Marionette doesn’t stop there! In addition to the client &amp;amp; server giving you this easy-peasy apparatus for automatic control of the browser, another facet of the Marionette project - the test harness and runner - provides a full-on framework for automatically running and reporting tests that utilize the automation framework. This makes it easy to set up your puppet and the stage you want it to perform on, pull the strings to make the browser dance, check whether the choreography looked right, and log a review of the performance. I can see the headline now:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Screenwriter Charlie Kaufman enthralls again with a brooding script for automated browser testing&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/img/bjm_puppethead_loop.gif&quot; alt=&quot;Animated GIF of a puppet from the film &amp;quot;Being John Malkovich&amp;quot; holding its hand to its head in disappointment&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;&lt;em&gt;You:&lt;/em&gt; GROAN. That's a terrible joke.&lt;br /&gt;
&lt;em&gt;Me:&lt;/em&gt; Sorry, it won't be the last. Hang in there, reader.
&lt;br /&gt;
&lt;span class=&quot;credit&quot;&gt;&lt;em&gt;Being John Malkovich&lt;/em&gt; via &lt;a href=&quot;https://thedissectedfrog.wordpress.com/2014/02/06/25-reasons-alfred-jarry-is-the-merdre/&quot;&gt;the dissected frog&lt;/a&gt; (adapted with &lt;a href=&quot;http://gifmaker.me/&quot;&gt;GIFMaker.me&lt;/a&gt;)&lt;/span&gt;
&lt;/p&gt;

&lt;p&gt;As I see it, the overall aim of the Marionette project is to make automated browser testing easy. This breaks down into two main tasks:  automation and testing. Here in Act I, we’ll investigate how the Marionette server and client let us automate the browser. In the next post, Act II, we’ll take a closer look at how the Marionette test harness and runner make use of that automation to test the browser.&lt;/p&gt;

&lt;h2 id=&quot;how-do-marionettes-server-and-client-automate-the-browser&quot;&gt;How do Marionette’s server and client automate the browser?&lt;/h2&gt;

&lt;p&gt;A real marionette is composed of three parts:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;a puppet&lt;/li&gt;
  &lt;li&gt;strings&lt;/li&gt;
  &lt;li&gt;a handle&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is a great analogy for Marionette’s approach to automating the browser (I guess that’s why they named it that).&lt;/p&gt;

&lt;p&gt;The puppet we want to move is the Firefox browser, or to be precise, the &lt;strong&gt;Gecko browser engine&lt;/strong&gt; underlying it. We want to make all of its  parts – windows, tabs, pages, page elements, scripts, and so forth – dance about as we please.&lt;/p&gt;

&lt;p&gt;The handle we use to control it is the &lt;strong&gt;Marionette client&lt;/strong&gt;, a Python library that gives us an API for accessing and manipulating the browser’s components and mimicking user interactions.&lt;/p&gt;

&lt;p&gt;The strings, which connect handle to puppet and thus make the whole contraption work, are the &lt;strong&gt;Marionette server&lt;/strong&gt;. The server comprises a set of components built in to Gecko (the bottom ends of the strings), and listens for commands coming in from the client (the top ends of the strings).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/marionette_labeled_wide.png&quot; alt=&quot;Annotated picture of a marionette puppet with the handle labeled &amp;quot;Marionette client&amp;quot;, the strings labeled &amp;quot;Marionette server&amp;quot;, and the puppet labeled &amp;quot;Gecko engine&amp;quot;&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;credit&quot; style=&quot;text-align: center;&quot;&gt;Photo adapted from &quot;Marionettes from Being John Malkovich&quot; &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-nd/2.0/legalcode&quot;&gt;by&lt;/a&gt; Alex Headrick, via &lt;a href=&quot;https://www.flickr.com/photos/alexheadrick/10637183205&quot;&gt;Flickr&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-puppet-the-gecko-browser-engine&quot;&gt;The puppet: the Gecko browser engine&lt;/h3&gt;

&lt;p&gt;So far, I’ve been talking about “the browser” as the thing we want to automate, and the browser I have in mind is (desktop) Firefox, which Marionette indeed lets us automate. But in fact, Marionette’s even more powerful than that; we can also use it to automate other products, like &lt;a href=&quot;https://www.mozilla.org/en-US/firefox/android/&quot;&gt;Firefox for Android&lt;/a&gt; (codenamed “Fennec”, so cute!) or &lt;a href=&quot;https://www.mozilla.org/en-US/firefox/os/&quot;&gt;FirefoxOS&lt;/a&gt;/&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/B2G_OS&quot;&gt;Boot to Gecko (B2G)&lt;/a&gt;. That’s because the puppet Marionette lets us control is actually not the Firefox desktop browser itself, but rather the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Gecko&quot;&gt;Gecko browser engine&lt;/a&gt; on top of which Firefox (like Fennec, and B2G) is built. All of the above, and any other &lt;a href=&quot;https://en.wikipedia.org/wiki/Gecko_(software)#Usage&quot;&gt;Gecko-based products&lt;/a&gt;, can in principle be automated with Marionette.&lt;sup id=&quot;a1&quot;&gt;&lt;a href=&quot;#f1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;sup&gt;, &lt;/sup&gt;&lt;sup id=&quot;a2&quot;&gt;&lt;a href=&quot;#f2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/bjm_marionettes_logos.jpg&quot; alt=&quot;Picture of three marionette puppets with Fennec, Firefox, and B2G logos instead of heads&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;Just choose your puppet!&lt;br /&gt;
&lt;span class=&quot;credit&quot;&gt;Adapted from &quot;Marionettes from Being John Malkovich&quot; &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-nd/2.0/legalcode&quot;&gt;by&lt;/a&gt; Alex Headrick via &lt;a href=&quot;https://www.flickr.com/photos/alexheadrick/10637183205&quot;&gt;Flickr&lt;/a&gt;, with logos from &lt;a href=&quot;https://twitter.com/FennecNightly&quot;&gt;@FennecNightly&lt;/a&gt;, &lt;a href=&quot;https://www.mozilla.org/en-US/styleguide/identity/firefox/branding/&quot;&gt;Firefox branding&lt;/a&gt;, and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/B2G_OS&quot;&gt;B2G OS&lt;/a&gt;.&lt;/span&gt;
&lt;/p&gt;

&lt;p&gt;So what exactly is this Gecko thing we’re playing with? Well, I’ve already revealed that it’s a &lt;a href=&quot;https://en.wikipedia.org/wiki/Web_browser_engine&quot;&gt;browser engine&lt;/a&gt; - but if you’re like me at the beginning of this internship, you’re wondering what a “browser engine” even is/does. &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Gecko&quot;&gt;MDN&lt;/a&gt; explains:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Gecko’s function is to read web content, such as HTML, CSS, XUL, JavaScript, and render it on the user’s screen or print it. In XUL-based applications Gecko is used to render the application’s user interface as well.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In other words, a browser engine like Gecko takes all that ugly raw HTML/CSS/JS code and turns it into a pretty picture on your screen (or, you know, &lt;a href=&quot;http://www.theworldsworstwebsiteever.com/&quot;&gt;not so pretty&lt;/a&gt; - but a picture, nonetheless), which explains why browser engines are also called “layout engines” or “rendering engines”.&lt;/p&gt;

&lt;p&gt;And see that bit about “XUL”? Well, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL&quot;&gt;XUL&lt;/a&gt; (XML User interface Language) is a markup language Mozilla came up with that lets you write application interfaces almost &lt;a href=&quot;https://en.wikipedia.org/wiki/XUL&quot;&gt;as if they were web pages&lt;/a&gt;. This lets Mozilla use Gecko not only to render the websites that Firefox lets you navigate to, but also to render the interface of Firefox itself: the search bar, tabs, forward and back buttons, etc. So it’s safe to say that Gecko is the heart of Firefox. And other applications, like the aforementioned Fennec and FirefoxOS, as well as the Thunderbird email client.&lt;/p&gt;

&lt;p&gt;But wait a minute; why do we have to go all the way down to Gecko to control the browser? It’s pretty easy to write add-ons to control Firefox’s &lt;a href=&quot;https://addons.mozilla.org/en-US/firefox/addon/noverflow/&quot;&gt;chrome&lt;/a&gt; or &lt;a href=&quot;https://addons.mozilla.org/en-US/firefox/addon/millennials-to-snake-people/&quot;&gt;content&lt;/a&gt;, so why can’t we just do that? Well, first of all, &lt;a href=&quot;https://en.wikipedia.org/wiki/Add-on_(Mozilla)#Security&quot;&gt;security&lt;/a&gt; issues abound in add-on territory, which is why add-ons typically &lt;a href=&quot;https://support.google.com/chrome_webstore/answer/186213?hl=en&amp;amp;ref_topic=6238977&quot;&gt;run with limited privileges&lt;/a&gt; and/or &lt;a href=&quot;https://blog.mozilla.org/addons/2015/04/15/the-case-for-extension-signing/&quot;&gt;require approval&lt;/a&gt;; so an add-on-based automation system would likely give under- or over-powered control over the browser. But in fact, the real reason Marionette isn’t an add-on is more historical. As browser automation expert and Mozillian David Burns explained at &lt;a href=&quot;https://youtu.be/cU6GML70cR4?t=6m40s&quot;&gt;SeleniumConf 2013&lt;/a&gt;, Marionette was originally developed to test FirefoxOS, which had the goal of using Gecko to run the entire operating system of a smartphone (hence FirefoxOS being codenamed &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/B2G_OS&quot;&gt;Boot to Gecko&lt;/a&gt;). FirefoxOS didn’t allow add-ons, so the Marionette team had to get creative and build an automation solution right into Gecko itself. This gave them the opportunity to make Marionette an implementation of the &lt;a href=&quot;http://w3c.github.io/webdriver/webdriver-spec.html&quot;&gt;WebDriver&lt;/a&gt; specification, a W3C standard for a browser automation interface. The decision to build Marionette as part of Gecko rather than an add-on thus had at least two advantages: Marionette had native access to Gecko and didn’t have to deal with add-on security issues,&lt;sup id=&quot;a3&quot;&gt;&lt;a href=&quot;#f3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; and by making Marionette WebDriver-compliant, Mozilla helped advanced the standardization of browser automation.&lt;/p&gt;

&lt;p&gt;So that’s why it’s Gecko, not Firefox, that Marionette ties strings to. In the next section, we’ll see what those knots look like.&lt;/p&gt;

&lt;h3 id=&quot;the-strings-the-marionette-server&quot;&gt;The strings: the Marionette server&lt;/h3&gt;

&lt;p&gt;As mentioned in the previous section, Marionette is built into Gecko itself. Specifically, the part of Marionette that’s built into Gecko, which gives us native access to the browser’s chrome and content, is called the Marionette server. The server acts as the strings of the contraption: the “top end” listens for commands from the handle (i.e. the Marionette client, which we’ll get to in the next section), and the “bottom end” actually manipulates the Gecko puppet as instructed by our commands.&lt;/p&gt;

&lt;p&gt;The code that makes up these strings is written in JavaScript and lives within the Firefox codebase at &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mozilla-central/testing/marionette&lt;/code&gt;&lt;/a&gt;. Let’s take a little tour, shall we?&lt;/p&gt;

&lt;p&gt;The strings are embedded into Gecko via a component called &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteComponent&lt;/code&gt;, which, when enabled,&lt;sup id=&quot;a4&quot;&gt;&lt;a href=&quot;#f4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; starts up a &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteServer&lt;/code&gt;, which is the object that most directly represents the strings themselves.
&lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteComponent&lt;/code&gt; is defined in &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/components/marionettecomponent.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;components/marionettecomponent.js&lt;/code&gt;&lt;/a&gt; (which, incidentally, includes &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/components/marionettecomponent.js#209&quot;&gt;the funniest line&lt;/a&gt; in the entire Marionette codebase), while
&lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteServer&lt;/code&gt; is defined in the file &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/server.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;server.js&lt;/code&gt;&lt;/a&gt;. As you can see in &lt;code class=&quot;highlighter-rouge&quot;&gt;server.js&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;MarionetteServer&lt;/code&gt; is responsible for tying the whole contraption together: it &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/server.js#85&quot;&gt;sets up a socket&lt;/a&gt; on a given port where it can listen for commands, and &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/server.js#110&quot;&gt;uses the dispatcher&lt;/a&gt; defined in &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/dispatcher.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dispatcher.js&lt;/code&gt;&lt;/a&gt; to receive incoming commands and send data about command outcomes back to the client. Together, the &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/server.js#74&quot;&gt;server&lt;/a&gt; and &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/dispatcher.js#48&quot;&gt;dispatcher&lt;/a&gt; provide a point of connection to the “bottom end” of the strings: &lt;code class=&quot;highlighter-rouge&quot;&gt;GeckoDriver&lt;/code&gt;, or the part of Marionette that actually talks to the browser’s chrome and content.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;GeckoDriver&lt;/code&gt;, so named because it’s the part of the whole Marionette apparatus that can most accurately be said to be the part &lt;em&gt;automatically driving&lt;/em&gt; Gecko, is defined in a file that is unsurprisingly named &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/driver.js#97&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;driver.js&lt;/code&gt;&lt;/a&gt;. The driver unites a bunch of other specialized modules which control various aspects of the automation, pulling them together and calling on them as needed according to the commands received by the server.
Some examples of the “specialized modules” I’m talking about are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/element.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;element.js&lt;/code&gt;&lt;/a&gt;, which maps out and gives us access to all the elements on the page&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/interaction.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;interaction.js&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/action.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;action.js&lt;/code&gt;&lt;/a&gt;, which help us mimic mouse, keyboard, and touchscreen interactions&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/evaluate.js&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;evaluate.js&lt;/code&gt;&lt;/a&gt;, which lets us execute JavaScript code&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;With the help of such modules, the driver allows us to grab on to whatever part of the browser’s chrome or content interests us and interact with it as we see fit.&lt;/p&gt;

&lt;p&gt;The Marionette server thus lets us communicate automatically with the browser, acting as the strings that get tugged on by the handle and in turn pull on the various limbs of our Gecko puppet. The final part of the puzzle, and subject of the next section, is the handle we can use to tell Marionette what it is we want to do.&lt;/p&gt;

&lt;h3 id=&quot;the-handle-the-marionette-client&quot;&gt;The handle: the Marionette client&lt;/h3&gt;

&lt;p&gt;For us puppeteers, the most relevant part of the whole marionette apparatus is the one we actually have contact with: the handle. In Marionette, that handle is called the Marionette client. The client gives us a convenient API for communicating with Gecko via the Marionette server and driver described in the previous section.&lt;/p&gt;

&lt;p&gt;Written in user-friendly Python,&lt;sup id=&quot;a5&quot;&gt;&lt;a href=&quot;#f5&quot;&gt;5&lt;/a&gt;&lt;/sup&gt; the client is defined in the confusingly-named &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/client/marionette_driver&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;client/marionette_driver&lt;/code&gt;&lt;/a&gt; directory inside of &lt;code class=&quot;highlighter-rouge&quot;&gt;mozilla-central/testing/marionette&lt;/code&gt;. The client and its API are described quite clearly in the &lt;a href=&quot;http://marionette-client.readthedocs.io/en/latest/&quot;&gt;refreshingly excellent documentation&lt;/a&gt;, which includes a quick &lt;a href=&quot;http://marionette-client.readthedocs.io/en/latest/interactive.html&quot;&gt;tutorial&lt;/a&gt; that walks you through the basic functionality.&lt;/p&gt;

&lt;p&gt;To start pulling Marionette’s strings, all we need to do is instantiate a &lt;code class=&quot;highlighter-rouge&quot;&gt;Marionette&lt;/code&gt; object (a client), tell it to open up a “session” with the server, i.e. a unique connection that allows messages to be sent back and forth between the two, and give it some &lt;a href=&quot;http://marionette-client.readthedocs.io/en/latest/reference.html&quot;&gt;commands&lt;/a&gt; to send to the server, which (as we saw above) executes them in Gecko. And of course, this assumes that the instance of Firefox (or our Gecko-based product of choice) has Marionette enabled,&lt;sup id=&quot;a4&quot;&gt;&lt;a href=&quot;#f4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; i.e. that there’s a Marionette server ready and waiting for our commands; if the server’s disabled, the strings we’re pulling won’t actually be connected to anything.&lt;/p&gt;

&lt;p&gt;The commands we give can either make changes to the browser’s state (e.g. navigate to a new page, click on an element, resize the window, etc.), or return information about that state (e.g. get the URL of the current page, get the value of a property of a certain element, etc.). When giving commands, we have to be mindful of which &lt;em&gt;context&lt;/em&gt; we’re in, i.e. whether we’re trying to do something with the browser’s &lt;em&gt;chrome&lt;/em&gt; or its &lt;em&gt;content&lt;/em&gt;. Some commands are specific to one context or the other (e.g. navigating to a given URL is a content operation), while others work in both contexts (e.g. clicking on an element can pertain to either of the two). Luckily, the client API gives us an easy one-liner to switch from one context to another.&lt;/p&gt;

&lt;p&gt;Let’s take a look at a little example (see the &lt;a href=&quot;http://marionette-client.readthedocs.io/en/latest/&quot;&gt;docs&lt;/a&gt; for more):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# Import browser automation magic&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;marionette&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Marionette&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;marionette_driver.by&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;By&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Instantiate the Marionette (client) class&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Marionette&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'localhost'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2828&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Start a session to talk to the server&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# (otherwise, nothing will work because the strings aren't connected)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Give a command and check that it worked&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://www.mozilla.org&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;building a better Internet&quot;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Switch to the chrome context for a minute (content is default)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;using_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CONTEXT_CHROME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;urlbar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;By&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;urlbar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;urlbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;about:robots&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;# try this one out yourself!&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Close the window, which ends the session&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It’s as simple as that! We’ve got an easy-to-use, high-level API that gives us full control over the browser, in terms of both chrome and content. Given this simple handle provided by the client, we don’t really need to worry about the mechanics of the server strings or the Gecko puppet itself; instead, we can concern ourselves with the dance steps we want the browser to perform.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i.imgur.com/pcTBYgJ.jpg&quot; alt=&quot;Still from the film &amp;quot;Being John Malkovich&amp;quot; picturing a life-sized marionette puppet dancing on a stage with ballerinas&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;Arabesque? Pirouette? Pas de bourrée? You name it!&lt;br /&gt;
&lt;span class=&quot;credit&quot;&gt;&lt;em&gt;Being John Malkovich&lt;/em&gt; via &lt;a href=&quot;http://screenplayhowto.com/beat-sheet/being-john-malkovich/&quot;&gt;ScreenplayHowTo&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;the-browser-is-our-plaything-now-what&quot;&gt;The browser is our plaything! Now what?&lt;/h2&gt;

&lt;p&gt;So now we’ve seen how the Marionette client and server give us the apparatus to control the browser like a puppet. The client gives us a simple handle we can manipulate, the server ties strings to that handle that transmit our wishes directly to the Gecko browser engine, which dances about as we please.&lt;/p&gt;

&lt;p&gt;But what about checking that it’s got the choreography right? Well, as mentioned above, the client API not only lets us make changes to the browser’s chrome and content, but also gives us information about their current state. And since it’s just regular old Python code, we can use simple &lt;code class=&quot;highlighter-rouge&quot;&gt;assert&lt;/code&gt; statements to perform quick checks, as in the example in the last section. But if we want to test the browser and user interactions with it more thoroughly, we could probably use a more developed and full-featured testing framework.&lt;/p&gt;

&lt;p&gt;ANOTHER SPOILER ALERT (well OK I actually already spoiled this one): the Marionette project gives us a tool for that too!&lt;/p&gt;

&lt;p&gt;In Act II of this article, we’ll explore the Marionette test harness and runner, which wrap the server-client automation apparatus described here in Act I in a testing framework that makes it easy to set the stage, perform a dance, and write a review of the performance. See you back here after the intermission!&lt;/p&gt;

&lt;h4 id=&quot;sources&quot;&gt;Sources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;The brains of Mozillians David Burns, Maja Frydrychowicz, Henrik Skupin, and Andreas Tolfsen. Many thanks to them for their feedback on this article.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=cU6GML70cR4&quot;&gt;From FirefoxDriver to Marionette, Mozilla pulls the strings&lt;/a&gt; - Jonathan Griffin &amp;amp; David Burns, SeleniumConf 2013&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://youtu.be/lfIzRHNXQhM?t=5m7s&quot;&gt;Automating your browser-based testing using WebDriver&lt;/a&gt; - Simon Stewart, Google Tech Talks 2012&lt;/li&gt;
  &lt;li&gt;The Marionette &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette&quot;&gt;codebase&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;documentation&lt;/a&gt; - Mozilla&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;notes&quot;&gt;Notes&lt;/h4&gt;

&lt;p&gt;&lt;b id=&quot;f1&quot;&gt;1&lt;/b&gt; Emphasis on the “in principle” part, because getting Marionette to play nicely with all of these products may not be trivial. For example, my internship mentor Maja has been hard at work recently on the Marionette runner and client to &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=787203&quot;&gt;make them Fennec-friendly&lt;/a&gt;. &lt;a href=&quot;#a1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f2&quot;&gt;2&lt;/b&gt; If you’re interested in automating a browser that doesn’t run on Gecko, don’t fret! Marionette is Gecko-specific, but it’s an implementation of the engine-agnostic &lt;a href=&quot;http://w3c.github.io/webdriver/webdriver-spec.html&quot;&gt;WebDriver&lt;/a&gt; standard, a W3C specification for a browser automation protocol. Given a WebDriver implementation for the engine in question, any browser can in principle be automated in the same way that Marionette automates Gecko browsers. &lt;a href=&quot;#a2&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f3&quot;&gt;3&lt;/b&gt; In fact, Marionette’s built-in design makes it able to circumvent the add-on signing requirement mentioned earlier; this would be dangerous if exposed to end users (see &lt;a href=&quot;#f4&quot;&gt;4&lt;/a&gt;), but comes in handy when Mozilla developers need to inject unsigned add-ons into development versions of Gecko browsers in automation. &lt;a href=&quot;#a3&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f4&quot;&gt;4&lt;/b&gt; At this point (or some much-earlier point) you might be wondering:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Wait a minute - if the Marionette server is built into Gecko itself, and gives us full automatic control of the browser, isn’t that a security risk?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Indeed it is. That’s why, although Marionette is indeed built into Gecko and is thus, in a sense, laying dormant in every instance of a Gecko-based application like Firefox, &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/components/marionettecomponent.js#56&quot;&gt;it’s disabled by default &lt;/a&gt; so it can’t be used to control the browser. To run Firefox (or your puppet of choice) with Marionette enabled, you have to be running a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/Builds&quot;&gt;Marionette-friendly build&lt;/a&gt; (i.e. a version for developers and not standard users) and &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/components/marionettecomponent.js#109-117&quot;&gt;specifically indicate that you want Marionette turned on when you launch the application&lt;/a&gt;. &lt;a href=&quot;#a4&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f5&quot;&gt;5&lt;/b&gt; Prefer to talk to the Marionette server from another language? No problem! All you need to do is implement a client in your language of choice, which is pretty simple since the &lt;a href=&quot;https://www.w3.org/TR/webdriver/&quot;&gt;WebDriver&lt;/a&gt; specification that Marionette implements uses bog-standard JSON over HTTP for client-server communications. If you want to use JavaScript, your job is even easier: you can take advantage of a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/Marionette_JavaScript_Tools&quot;&gt;JS Marionette client&lt;/a&gt; developed for the B2G project. &lt;a href=&quot;#a5&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>As you may already know, I’m spending my summer interning with Mozilla’s Enginering Productivity team through the Outreachy program. Specifically, the project I’m working on is called Test-driven Refactoring of Marionette’s Python Test Runner. But what exactly does that mean? What is Marionette, and what does it have to do with testing?

In this two-part series, I’d like to share a bit of what I’ve learned about the Marionette project, and how its various components help us test Firefox by allowing us to automatically control the browser from within. Today, in Act I, I’ll give an overview of how the Marionette server and client make the browser our puppet. Later on, in Act II, I’ll describe how the Marionette test harness and runner make automated testing a breeze, and let you in on the work I’m doing on the Marionette test runner for my internship.

And since we’re talking about puppets, you can bet there’s going to be a hell of a lot of Being John Malkovich references. Consider yourself warned!</summary></entry><entry><title>testing 3</title><link href="/blog/mozilla-london-all-hands-2016/" rel="alternate" type="text/html" title="testing 3" /><published>2016-06-20T00:00:00-07:00</published><updated>2016-06-20T00:00:00-07:00</updated><id>/blog/mozilla-london-all-hands-2016</id><content type="html" xml:base="/blog/mozilla-london-all-hands-2016/">&lt;p&gt;Last week, all of Mozilla met in London for a whirlwind tour from TARDIS to TaskCluster, from BBC1 to e10s, from Regent Park to the release train, from Paddington to Positron. As an &lt;a href=&quot;/blog/outreachy-what-how-why/&quot;&gt;Outreachy intern&lt;/a&gt;, I felt incredibly lucky to be part of this event, which gave me a chance to get to know Mozilla, my team, and the other interns much better.  It was a jam-packed work week of talks, meetings, team events, pubs, and parties, and it would be impossible to blog about all of the fun, fascinating, and foxy things I learned and did. But I can at least give you some of the highlights! Or, should I say, &lt;em&gt;Who&lt;/em&gt;-lights? (Be warned, that is not the last pun you will encounter here today.)&lt;/p&gt;

&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;es&quot;&gt;&lt;p lang=&quot;und&quot; dir=&quot;ltr&quot;&gt;&lt;a href=&quot;https://t.co/Tentx02jNh&quot;&gt;pic.twitter.com/Tentx02jNh&lt;/a&gt;&lt;/p&gt;&amp;mdash; Valentin Antonio Bta (@vantonio_) &lt;a href=&quot;https://twitter.com/vantonio_/status/772163640258535425&quot;&gt;3 de septiembre de 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;!--end-excerpt--&gt;

&lt;h2 id=&quot;role-models&quot;&gt;Role models&lt;/h2&gt;

&lt;p&gt;While watching the plenary session that kicked off the week, it felt great to realize that of the 4 executives emerging from the TARDIS in the corner to take the stage (3 Mozillians and 1 guest star), a full 50% were women. As I had shared with my mentor (also a woman) before arriving in London, one of my goals for the week was to get inspired by finding some new role moz-els (ha!): Mozillians who I could aspire to be like one day, especially those of the female variety.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Why a female role model, specifically? What does gender have to do with it?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Well, to be a good role model for you, a person needs to not only have a life/career/lego-dragon you aspire to have one day, but also be someone who you can already identify with, and see yourself in, today. A role model serves as a bridge between the two.  As I am a woman, and that is a fundamental part of my experience, a role model who shares that experience is that much easier for me to relate to. I wouldn’t turn down a half-Irish-half-Indian American living in Germany, either.&lt;/p&gt;

&lt;p&gt;At any rate, in London I found no shortage of talented, experienced, and - perhaps most importantly - &lt;em&gt;valued&lt;/em&gt; &lt;a href=&quot;http://www.womoz.org&quot;&gt;women at Mozilla&lt;/a&gt;. I don’t want to single anyone out here, but I can tell you that I met women at all levels of the organization, from intern to executive, who have done and are doing really exciting things to advance both the technology and culture of Mozilla and the web. Knowing that those people exist, and that what they do is possible, might be the most valuable thing I took home with me from London.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Aw, what about the Whomsycorn?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;No offense, Whomyscorn, you’re cool too.&lt;/p&gt;

&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;The Whomsycorn, making its &lt;a href=&quot;https://twitter.com/hashtag/mozlondon?src=hash&quot;&gt;#mozlondon&lt;/a&gt; debut.&lt;br /&gt;&lt;br /&gt;(c/o &lt;a href=&quot;https://twitter.com/shorlander&quot;&gt;@shorlander&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/FirefoxUX&quot;&gt;@FirefoxUX&lt;/a&gt;) &lt;a href=&quot;https://t.co/xEFGcnNZNp&quot;&gt;pic.twitter.com/xEFGcnNZNp&lt;/a&gt;&lt;/p&gt;&amp;mdash; madhava (@madhava) &lt;a href=&quot;https://twitter.com/madhava/status/742702961185423360&quot;&gt;June 14, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;h2 id=&quot;electrolysis-e10s&quot;&gt;Electrolysis (e10s)&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.mozilla.org/Electrolysis&quot;&gt;Electrolysis&lt;/a&gt;, or “e10s” for those who prefer integers to morphemes, is a massive and long-running initiative to separate the work Firefox does into multiple processes.&lt;/p&gt;

&lt;p&gt;At the moment, the Firefox desktop program that the average user downloads and uses to explore the web runs in a single process. That means that one process has to do all the work of loading &amp;amp; displaying web pages (the browser “content”), as well as the work of displaying the user interface and its various tabs, search bars, sidebars, etc. (the browser “chrome”). So if something goes wrong with, say, the execution of a poorly-written script on a particular page, instead of only that page refusing to load, or its tab perhaps crashing, the entire browser itself may hang or crash.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;That’s not cool. Especially if you often have lots of tabs open. Not that I ever do.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Of course not. Anyway, even less cool is the possibility that some jerk (not that there are any of those on the internet, though, right?) could make a page with a script that hijacks the entire browser process, and does super uncool stuff.&lt;/p&gt;

&lt;p&gt;It would be much cooler if, instead of a single massive process, Firefox could use separate processes for content and chrome. Then, if a page crashes, at least the UI still works. And if we assign the content process(es) reduced permissions, we can keep possibly-jerkish content in a nice, safe sandbox so that it can’t do uncool things with our browser or computer.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Better performance, more security? Super cool.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Indeed. Separation is cool. &lt;a href=&quot;https://en.wikipedia.org/wiki/Electrolysis&quot;&gt;Electrolysis is separation&lt;/a&gt;. Ergo, Electrolysis is cool.&lt;/p&gt;

&lt;p&gt;It’s not perfect yet - for example, compatibility with right-to-left languages, accessibility (or “a11y”, if “e10s” needs a buddy), and add-ons is still an issue - but it’s getting there, and it’s rolling out real soon! Given that the project has been underway since 2008, that’s pretty exciting.&lt;/p&gt;

&lt;h2 id=&quot;rust-servo--oxidation&quot;&gt;Rust, Servo, &amp;amp; Oxidation&lt;/h2&gt;

&lt;p&gt;&lt;span style=&quot;float: right&quot;&gt; &lt;img src=&quot;https://www.rust-lang.org/logos/rust-logo-blk.svg&quot; alt=&quot;Rust logo&quot; /&gt; &lt;/span&gt;
I first heard about the increasingly popular language &lt;a href=&quot;https://www.rust-lang.org/&quot;&gt;Rust&lt;/a&gt; when I was at the &lt;a href=&quot;https://www.recurse.com&quot;&gt;Recurse Center&lt;/a&gt; last fall, and all I knew about it was that it was being used at Mozilla to develop a new browser engine called &lt;a href=&quot;https://servo.org/&quot;&gt;Servo&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;More recently, I heard talks from Mozillians like &lt;a href=&quot;http://conferences.oreilly.com/oscon/open-source-us/public/schedule/detail/49024&quot;&gt;E. Dunham&lt;/a&gt; that revealed a bit more about why people are so excited about Rust: it’s a new language for low-level programming, and compared with the current mainstay C, it guarantees memory safety. As in, “No more &lt;a href=&quot;https://en.wikipedia.org/wiki/Segmentation_fault&quot;&gt;segfaults&lt;/a&gt;, no more &lt;a href=&quot;https://www.lucidchart.com/techblog/2015/08/31/the-worst-mistake-of-computer-science/&quot;&gt;NULL&lt;/a&gt;s, no more &lt;a href=&quot;https://en.wikipedia.org/wiki/Dangling_pointer&quot;&gt;dangling pointers&lt;/a&gt;’ dirty looks”. It’s also been designed with &lt;a href=&quot;https://en.wikipedia.org/wiki/Concurrency_(computer_science)&quot;&gt;concurrency&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Thread_safety&quot;&gt;thread safety&lt;/a&gt; in mind, so that programs can take better advantage of e.g. multi-core processors. (Do not ask me to get into details on this; the lowest level I have programmed at is probably sitting in a beanbag chair. But I believe them when they say that Rust does those things, and that those things are good.)&lt;/p&gt;

&lt;p&gt;Finally, it has the advantage of having a tight-knit, active, and dedicated community &lt;a href=&quot;https://twitter.com/rustlang/status/633323561457971201&quot;&gt;“populated entirely by human beings”&lt;/a&gt;, which is due in no small part to the folks at Mozilla and beyond who’ve been working to &lt;a href=&quot;https://www.rust-lang.org/conduct.html&quot;&gt;keep the community that way&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;OK OK OK, so Rust is a super cool new language. What can you do with it?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Well, lots of stuff. For example, you could write a totally new &lt;a href=&quot;https://en.wikipedia.org/wiki/Web_browser_engine&quot;&gt;browser engine&lt;/a&gt;, and call it &lt;a href=&quot;https://servo.org/&quot;&gt;Servo&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Wait, what’s a browser engine?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;A browser engine (aka layout or rendering engine) is basically the part of a browser that allows it to show you the web pages you navigate to. That is, it takes the raw HTML and CSS content of the page, figures out what it means, and turns it into a pretty picture for you to look at.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Uh, I’m pretty sure I can see web pages in Firefox right now. Doesn’t it already have an engine?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Indeed it does. It’s called &lt;a href=&quot;https://en.wikipedia.org/wiki/Gecko_(software)&quot;&gt;Gecko&lt;/a&gt;, and it’s written in C++. It lets Firefox make the web beautiful every day.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;So why Servo, then? Is it going to replace Gecko?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;No. Servo is an experimental engine developed by Mozilla Research; it’s just intended to serve(-o!) as a playground for new ideas that could improve a browser’s performance and security.&lt;/p&gt;

&lt;p&gt;The beauty of having a research project like Servo and a real-world project like Gecko under the same roof at Mozilla is that when the Servo team’s research unveils some new and clever way of doing something faster or more awesomely than Gecko does, everybody wins! That’s thanks to the &lt;a href=&quot;https://wiki.mozilla.org/Oxidation&quot;&gt;Oxidation&lt;/a&gt; project, which aims to integrate clever Rust components cooked up in the Servo lab into Gecko. Apparently, Firefox 45 already got (somewhat unexpectedly) an MP4 metadata parser in Rust, which has been running just fine so far. It’s just the tip of the iceberg, but the potential for cool ideas from Servo to make their way into Gecko via Oxidation is pretty exciting.&lt;/p&gt;

&lt;h2 id=&quot;the-janitor&quot;&gt;The Janitor&lt;/h2&gt;

&lt;p&gt;Another really exciting thing I heard about during the week is &lt;a href=&quot;https://janitor.technology/&quot;&gt;The Janitor&lt;/a&gt;, a tool that lets you contribute to FOSS projects like Firefox straight from your browser.&lt;/p&gt;

&lt;p&gt;For me, one of the biggest hurdles to contributing to a new open-source project is getting the development environment all set up.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Ugh I hate that. I just want to change one line of code, do I really need to spend two days grappling with installation and configuration?!?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Exactly. But the Janitor to the rescue!&lt;/p&gt;

&lt;iframe src=&quot;//giphy.com/embed/XhLq1G1mvFpuM&quot; width=&quot;480&quot; height=&quot;257&quot; frameborder=&quot;0&quot; class=&quot;giphy-embed&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;p style=&quot;font-size:.5em&quot;&gt;&lt;a href=&quot;http://giphy.com/gifs/perfectloops-spike-janitor-XhLq1G1mvFpuM&quot;&gt;Cowboy Bebop via GIPHY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Powered by the very cool &lt;a href=&quot;https://c9.io/&quot;&gt;Cloud9 IDE&lt;/a&gt;, the Janitor gives you one-click access to a ready-to-go, cloud-based development environment for a given project. At the moment there are a handful of project supported (including Firefox, Servo, and Google Chrome), and new ones can be added by simply writing a &lt;a href=&quot;https://www.digitalocean.com/community/tutorials/docker-explained-using-dockerfiles-to-automate-building-of-images&quot;&gt;Dockerfile&lt;/a&gt;. I’m not sure that an easier point of entry for new FOSS contributors is physically possible. The ease of start-up is perfect for short-term contribution efforts like hackathons or workshops, and thanks to the collaborative features of Cloud9 it’s also perfect for remote pairing.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Awesome, I’m sold. How do I use it?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Unfortunately, the Janitor is still in alpha and invite-only, but you can go to &lt;a href=&quot;https://janitor.technology&quot;&gt;janitor.technology&lt;/a&gt; and sign up to get on the waitlist. I’m still waiting to get my invite, but if it’s half as fantastic as it seems, it will be a huge step forward in making it easier for new contributors to get involved with FOSS projects. If it starts supporting offline work (apparently the Cloud9 editor is somewhat functional offline already, once you’ve loaded the page initially, but the terminal and VNC always needs a connection to function), I think it’ll be unstoppable.&lt;/p&gt;

&lt;h2 id=&quot;l20n&quot;&gt;L20n&lt;/h2&gt;

&lt;p&gt;The last cool thing I heard about (literally, it was the last session on Friday) at this work week was &lt;a href=&quot;http://l20n.org/&quot;&gt;L20n&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Wait, I thought “localization” was abbreviated “L10n”?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yeah, um, that’s the whole pun. Way to be sharp, exhausted-from-a-week-of-talks-Anjana.&lt;/p&gt;

&lt;p&gt;See, L20n is a next-generation framework for web and browser localization (l10n) and internationalization (i18n). It’s apparently a long-running project too, born out of the frustrations of the l10n status quo.&lt;/p&gt;

&lt;p&gt;According to the L20n team, at the moment the localization system for Firefox is spread over multiple files with multiple syntaxes, which is no fun for localizers, and multiple APIs, which is no fun for developers. What we end up with is program logic intermingling with l10n/i18n decisions (say, determining the correct format for a date) such that developers, who probably aren’t also localizers, end up making decisions about language that should really be in the hands of the localizers. And if a localizer makes a syntax error when editing a certain localization file, the entire browser refuses to run. Not cool.&lt;/p&gt;

&lt;p&gt;Pop quiz: what’s cool?&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Um…&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;C’mon, we just went over this. Go on and scroll up.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Electrolyis?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yeah, that’s cool, but thinking more generally…&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Separation?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;That’s right! &lt;em&gt;Separation&lt;/em&gt; is super cool! And that’s what L20n does: separate l10n code from program source code. This way, developers aren’t pretending to be localizers, and localizers aren’t crashing browsers. Instead, developers are merely getting localized strings by calling a single L20n API, and localizers are providing localized strings in a single file format &amp;amp; syntax.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Wait but, isn’t unifying everything into a single API/file format the opposite of separation? Does that mean it’s not cool?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Shhh. Meaningful separation of concerns is cool. Arbitrary separation of a single concern (l10n) is not cool. L20n knows the difference.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;OK, fine. But first “e10s” and “a11y”, now “l10n”/”l20n” and “i18n”… why does everything need a numbreviation?&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You’ve got me there.&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>Last week, all of Mozilla met in London for a whirlwind tour from TARDIS to TaskCluster, from BBC1 to e10s, from Regent Park to the release train, from Paddington to Positron. As an Outreachy intern, I felt incredibly lucky to be part of this event, which gave me a chance to get to know Mozilla, my team, and the other interns much better.  It was a jam-packed work week of talks, meetings, team events, pubs, and parties, and it would be impossible to blog about all of the fun, fascinating, and foxy things I learned and did. But I can at least give you some of the highlights! Or, should I say, Who-lights? (Be warned, that is not the last pun you will encounter here today.)

pic.twitter.com/Tentx02jNh&amp;mdash; Valentin Antonio Bta (@vantonio_) 3 de septiembre de 2016</summary></entry><entry><title>testing 4</title><link href="/blog/i-want-to-mock-with-you/" rel="alternate" type="text/html" title="testing 4" /><published>2016-06-16T00:00:00-07:00</published><updated>2016-06-16T00:00:00-07:00</updated><id>/blog/i-want-to-mock-with-you</id><content type="html" xml:base="/blog/i-want-to-mock-with-you/">&lt;p&gt;&lt;em&gt;This post brought to you from Mozilla’s London All Hands meeting - cheers!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;When writing Python unit tests, sometimes you want to just test one specific aspect of a piece of code that does multiple things.&lt;/p&gt;

&lt;p&gt;For example, maybe you’re wondering:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Does object X get created here?&lt;/li&gt;
  &lt;li&gt;Does method X get called here?&lt;/li&gt;
  &lt;li&gt;Assuming method X returns Y, does the right thing happen after that?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Finding the answers to such questions is super simple if you use &lt;code class=&quot;highlighter-rouge&quot;&gt;mock&lt;/code&gt;: a library which “allows you to replace parts of your system under test with mock objects and make assertions about how they have been used.” Since Python 3.3 it’s available simply as &lt;code class=&quot;highlighter-rouge&quot;&gt;unittest.mock&lt;/code&gt;, but if you’re using an earlier Python you can get it from PyPI with &lt;code class=&quot;highlighter-rouge&quot;&gt;pip install mock&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So, what are mocks? How do you use them?&lt;/p&gt;

&lt;p&gt;Well, in short I could tell you that a &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock&lt;/code&gt; is a sort of magical object that’s intended to be a doppelgänger for some object in your code that you want to test. &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock&lt;/code&gt;s have special attributes and methods you can use to find out how your test is using the object you’re mocking. For example, you can use &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock.called&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;.call_count&lt;/code&gt; to find out if and how many times a method has been called. You can also manipulate &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock&lt;/code&gt;s to simulate functionality that you’re not directly testing, but is necessary for the code you’re testing. For example, you can set &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock.return_value&lt;/code&gt; to pretend that an function gave you some particular output, and make sure that the right thing happens in your program.&lt;/p&gt;

&lt;p&gt;But honestly, I don’t think I could give a better or more succinct overview of mocks than the &lt;a href=&quot;https://docs.python.org/3/library/unittest.mock.html#quick-guide&quot;&gt;Quick Guide&lt;/a&gt;, so for a real intro you should go read that. While you’re doing that, I’m going to watch this fantastic Michael Jackson video:&lt;/p&gt;

&lt;div style=&quot;text-align:center; padding:1em;&quot;&gt;&lt;iframe width=&quot;420&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/5X-Mrc2l1d0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;

&lt;p&gt;Oh you’re back? Hi! So, now that you have a basic idea of what makes &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock&lt;/code&gt;s super cool, let me share with you some of the tips/tips/trials/tribulations I discovered when starting to use them.&lt;/p&gt;

&lt;h2 id=&quot;patches-and-namespaces&quot;&gt;Patches and namespaces&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;tl;dr: Learn &lt;a href=&quot;https://docs.python.org/3/library/unittest.mock.html#where-to-patch&quot;&gt;where to patch&lt;/a&gt; if you don’t want to be sad!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;When you import a helper module into a module you’re testing, the tested module gets its own namespace for the helper module. So if you want to mock a class from the helper module, you need to mock it &lt;em&gt;within the tested module’s namespace&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;For example, let’s say I have a Super Useful &lt;code class=&quot;highlighter-rouge&quot;&gt;helper&lt;/code&gt; module, which defines a class &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass&lt;/code&gt; that is So Very Helpful:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# helper.py

class HelperClass():
    def __init__(self):
        self.name = &quot;helper&quot;
    def help(self):
        helpful = True
        return helpful
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And in the module I want to test, &lt;code class=&quot;highlighter-rouge&quot;&gt;tested&lt;/code&gt;, I instantiate the Incredibly Helpful &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass&lt;/code&gt;, which I imported from &lt;code class=&quot;highlighter-rouge&quot;&gt;helper.py&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tested.py

from helper import HelperClass

def fn():
    h = HelperClass() # using tested.HelperClass
    return h.help()
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now, let’s say that it is Incredibly Important that I make sure that a &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass&lt;/code&gt; object is actually getting created in &lt;code class=&quot;highlighter-rouge&quot;&gt;tested&lt;/code&gt;, i.e. that &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass()&lt;/code&gt; is being called. I can write a test module that patches &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass&lt;/code&gt;, and check the resulting &lt;code class=&quot;highlighter-rouge&quot;&gt;Mock&lt;/code&gt; object’s &lt;a href=&quot;https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.called&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;called&lt;/code&gt; property&lt;/a&gt;. But I have to be careful that I patch the right &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass&lt;/code&gt;! Consider &lt;code class=&quot;highlighter-rouge&quot;&gt;test_tested.py&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# test_tested.py

import tested

from mock import patch

# This is not what you want:
@patch('helper.HelperClass')
def test_helper_wrong(mock_HelperClass):
    tested.fn()
    assert mock_HelperClass.called # Fails! I mocked the wrong class, am sad :(

# This is what you want:
@patch('tested.HelperClass')
def test_helper_right(mock_HelperClass):
    tested.fn()
    assert mock_HelperClass.called # Passes! I am not sad :)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;OK great! If I patch &lt;code class=&quot;highlighter-rouge&quot;&gt;tested.HelperClass&lt;/code&gt;, I get what I want.&lt;/p&gt;

&lt;p&gt;But what if the module I want to test uses &lt;code class=&quot;highlighter-rouge&quot;&gt;import helper&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;helper.HelperClass()&lt;/code&gt;, instead of &lt;code class=&quot;highlighter-rouge&quot;&gt;from helper import HelperClass&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;HelperClass()&lt;/code&gt;? As in &lt;code class=&quot;highlighter-rouge&quot;&gt;tested2.py&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tested2.py

import helper

def fn():
    h = helper.HelperClass()
    return h.help()
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;In this case, in my test for &lt;code class=&quot;highlighter-rouge&quot;&gt;tested2&lt;/code&gt; I need to patch the class with &lt;code class=&quot;highlighter-rouge&quot;&gt;patch('helper.HelperClass')&lt;/code&gt; instead of &lt;code class=&quot;highlighter-rouge&quot;&gt;patch('tested.HelperClass')&lt;/code&gt;. Consider &lt;code class=&quot;highlighter-rouge&quot;&gt;test_tested2.py&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# test_tested2.py

import tested2
from mock import patch

# This time, this IS what I want:
@patch('helper.HelperClass')
def test_helper_2_right(mock_HelperClass):
    tested2.fn()
    assert mock_HelperClass.called # Passes! I am not sad :)

# And this is NOT what I want!
# Mock will complain: &quot;module 'tested2' does not have the attribute 'HelperClass'&quot;
@patch('tested2.HelperClass')
def test_helper_2_right(mock_HelperClass):
    tested2.fn()
    assert mock_HelperClass.called
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Wonderful!&lt;/p&gt;

&lt;p&gt;In short: be careful of which namespace you’re patching in. If you patch whatever object you’re testing in the wrong namespace, the object that’s created will be the real object, not the mocked version. And that will make you confused and sad.&lt;/p&gt;

&lt;p&gt;I was confused and sad when I was trying to mock the &lt;code class=&quot;highlighter-rouge&quot;&gt;TestManifest.active_tests()&lt;/code&gt; function to test &lt;a href=&quot;https://dxr.mozilla.org/mozilla-central/source/testing/marionette/harness/marionette/runner/base.py#902&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;BaseMarionetteTestRunner.add_test&lt;/code&gt;&lt;/a&gt;, and I was trying to mock it in the place it was defined, i.e. &lt;code class=&quot;highlighter-rouge&quot;&gt;patch('manifestparser.manifestparser.TestManifest.active_tests')&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Instead, I had to patch &lt;code class=&quot;highlighter-rouge&quot;&gt;TestManifest&lt;/code&gt; &lt;em&gt;within the &lt;code class=&quot;highlighter-rouge&quot;&gt;runner.base&lt;/code&gt; module&lt;/em&gt;, i.e. the place where it was actually being called by the &lt;code class=&quot;highlighter-rouge&quot;&gt;add_test&lt;/code&gt; function, i.e. &lt;code class=&quot;highlighter-rouge&quot;&gt;patch('marionette.runner.base.TestManifest.active_tests')&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So don’t be confused or sad, mock the thing &lt;em&gt;where it is used&lt;/em&gt;, not where it was defined!&lt;/p&gt;

&lt;h2 id=&quot;pretending-to-read-files-with-mockopen&quot;&gt;Pretending to read files with &lt;code class=&quot;highlighter-rouge&quot;&gt;mock_open&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;One thing I find particularly annoying is writing tests for modules that have to interact with files. Well, I guess I could, like, write code in my tests that creates dummy files and then deletes them, or (even worse) just put some dummy files next to my test module for it to use. But wouldn’t it be better if I could just skip all that and &lt;em&gt;pretend&lt;/em&gt; the files exist, and have whatever content I need them to have?&lt;/p&gt;

&lt;p&gt;It sure would! And that’s exactly the type of thing &lt;code class=&quot;highlighter-rouge&quot;&gt;mock&lt;/code&gt; is really helpful with. In fact, there’s even a helper called &lt;code class=&quot;highlighter-rouge&quot;&gt;mock_open&lt;/code&gt; that makes it super simple to pretend to read a file. All you have to do is patch the builtin &lt;code class=&quot;highlighter-rouge&quot;&gt;open&lt;/code&gt; function, and pass in &lt;code class=&quot;highlighter-rouge&quot;&gt;mock_open(read_data=&quot;my data&quot;)&lt;/code&gt; to the patch to make the &lt;code class=&quot;highlighter-rouge&quot;&gt;open&lt;/code&gt; in the code you’re testing only &lt;em&gt;pretend&lt;/em&gt; to open a file with that content, instead of actually doing it.&lt;/p&gt;

&lt;p&gt;To see it in action, you can take a look at a (not necessarily great) little test I wrote that pretends to open a file and read some data from it:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def test_nonJSON_file_throws_error(runner):
    with patch('os.path.exists') as exists:
        exists.return_value = True
        with patch('__builtin__.open', mock_open(read_data='[not {valid JSON]')):
            with pytest.raises(Exception) as json_exc:
                runner._load_testvars() # This is the code I want to test, specifically to be sure it throws an exception
    assert 'not properly formatted' in json_exc.value.message
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;gotchya-mocking-and-debugging-at-the-same-time&quot;&gt;Gotchya: Mocking and debugging at the same time&lt;/h2&gt;

&lt;p&gt;See that &lt;code class=&quot;highlighter-rouge&quot;&gt;patch('os.path.exists')&lt;/code&gt; in the test I just mentioned? Yeah, that’s probably not a great idea. At least, I found it problematic.&lt;/p&gt;

&lt;p&gt;I was having some difficulty with a similar test, in which I was also patching &lt;code class=&quot;highlighter-rouge&quot;&gt;os.path.exists&lt;/code&gt; to fake a file (though that wasn’t the part I was having problems with), so I decided to &lt;a href=&quot;https://pytest.org/latest/usage.html#setting-a-breakpoint-aka-set-trace&quot;&gt;set a breakpoint with &lt;code class=&quot;highlighter-rouge&quot;&gt;pytest.set_trace()&lt;/code&gt;&lt;/a&gt; to drop into the Python debugger and try to understand the problem. The debugger I use is &lt;a href=&quot;https://pypi.python.org/pypi/pdbpp/&quot;&gt;pdb++&lt;/a&gt;, which just adds some helpful little features to the default &lt;a href=&quot;https://docs.python.org/3/library/pdb.html&quot;&gt;pdb&lt;/a&gt;, like colors and &lt;a href=&quot;https://pypi.python.org/pypi/pdbpp/#sticky-mode&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sticky&lt;/code&gt; mode&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So there I am, merrily debugging away at my &lt;code class=&quot;highlighter-rouge&quot;&gt;(Pdb++)&lt;/code&gt; prompt. But as soon as I entered the &lt;code class=&quot;highlighter-rouge&quot;&gt;patch('os.path.exists')&lt;/code&gt; context, I started getting weird behavior in the debugger console: complaints about some &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.fancycompleterrc.py&lt;/code&gt; file and certain commands not working properly.&lt;/p&gt;

&lt;p&gt;It turns out that at least one module pdb++ was using (e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;fancycompleter&lt;/code&gt;) was getting confused about file(s) it needs to function, because of checks for &lt;code class=&quot;highlighter-rouge&quot;&gt;os.path.exists&lt;/code&gt; that were now all messed up thanks to my ill-advised &lt;code class=&quot;highlighter-rouge&quot;&gt;patch&lt;/code&gt;. This had me scratching my head for longer than I’d like to admit.&lt;/p&gt;

&lt;p&gt;What I still don’t understand (explanations welcome!) is why I still got this weird behavior when I tried to change the test to patch &lt;code class=&quot;highlighter-rouge&quot;&gt;'mymodule.os.path.exists'&lt;/code&gt; (where &lt;code class=&quot;highlighter-rouge&quot;&gt;mymodule.py&lt;/code&gt; contains &lt;code class=&quot;highlighter-rouge&quot;&gt;import os&lt;/code&gt;) instead of just &lt;code class=&quot;highlighter-rouge&quot;&gt;'os.path.exists'&lt;/code&gt;. Based on what we saw about namespaces, I figured this would restrict the mock to only &lt;code class=&quot;highlighter-rouge&quot;&gt;mymodule&lt;/code&gt;, so that pdb++ and related modules would be safe - but it didn’t seem to have any effect whatsoever. But I’ll have to save that mystery for another day (and another post).&lt;/p&gt;

&lt;p&gt;Still, lesson learned: if you’re patching a commonly used function, like, say, &lt;code class=&quot;highlighter-rouge&quot;&gt;os.path.exists&lt;/code&gt;, don’t forget that once you’re inside that mocked context, you no longer have access to the real function &lt;em&gt;at all&lt;/em&gt;! So keep an eye out, and mock responsibly!&lt;/p&gt;

&lt;h2 id=&quot;mock-the-night-away&quot;&gt;Mock the night away&lt;/h2&gt;

&lt;p&gt;Those are just a few of the things I’ve learned in my first few weeks of &lt;code class=&quot;highlighter-rouge&quot;&gt;mock&lt;/code&gt;ing. If you need some bedtime reading, check out these resources that I found helpful:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.toptal.com/python/an-introduction-to-mocking-in-python&quot;&gt;An intro to mocking in Python&lt;/a&gt; on Toptal&lt;/li&gt;
  &lt;li&gt;Mozilla dev Armen Z.G.’s &lt;a href=&quot;http://armenzg.blogspot.de/2016/04/improving-how-i-write-python-tests.html&quot;&gt;blog post on better Python tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I’m sure &lt;code class=&quot;highlighter-rouge&quot;&gt;mock&lt;/code&gt; has all kinds of secrets, magic, and superpowers I’ve yet to discover, but that gives me something to look forward to! If you have &lt;code class=&quot;highlighter-rouge&quot;&gt;mock&lt;/code&gt;-foo tips to share, just give me a shout on &lt;a href=&quot;https://twitter.com/intent/tweet?screen_name=AnjanaVakil&quot;&gt;Twitter&lt;/a&gt;!&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>When writing Python unit tests, sometimes you want to just test one specific aspect of a piece of code that does multiple things.
 
 For example, maybe you're wondering:
 
 * Does object X get created here?
 * Does method X get called here?
 * Assuming method X returns Y, does the right thing happen after that?
 
 Finding the answers to such questions is super simple if you use `mock`: a library which 'allows you to replace parts of your system under test with mock objects and make assertions about how they have been used.' Let's talk about why `Mock`s are super cool, and some of the tips/tips/trials/tribulations I discovered when starting to use them.</summary></entry><entry><title>testing 5</title><link href="/blog/warming-up-to-mercurial/" rel="alternate" type="text/html" title="testing 5" /><published>2016-06-03T00:00:00-07:00</published><updated>2016-06-03T00:00:00-07:00</updated><id>/blog/warming-up-to-mercurial</id><content type="html" xml:base="/blog/warming-up-to-mercurial/">&lt;p&gt;When it comes to &lt;a href=&quot;https://en.wikipedia.org/wiki/Version_control&quot;&gt;version control&lt;/a&gt;, I’m a &lt;a href=&quot;https://git-scm.com/&quot;&gt;Git&lt;/a&gt; girl. I had to use &lt;a href=&quot;https://subversion.apache.org/&quot;&gt;Subversion&lt;/a&gt; a little bit for a project in grad school (not distributed == not so fun). But I had never touched &lt;a href=&quot;https://www.mercurial-scm.org/&quot;&gt;Mercurial&lt;/a&gt; until I decided to contribute to Mozilla’s &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;Marionette&lt;/a&gt;, a testing tool for Firefox, for my &lt;a href=&quot;/blog/outreachy-what-how-why/&quot;&gt;Outreachy application&lt;/a&gt;. Mercurial is the &lt;a href=&quot;http://mozilla-version-control-tools.readthedocs.io/en/latest/hgmozilla/index.html&quot;&gt;main version control system&lt;/a&gt; for Firefox and Marionette development,&lt;sup id=&quot;a1&quot;&gt;&lt;a href=&quot;#f1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; so this gave me a great opportunity to start learning my way around the &lt;code class=&quot;highlighter-rouge&quot;&gt;hg&lt;/code&gt;. Turns out it’s really close to Git, though there are some subtle differences that can be a little tricky. This post documents the basics and the trip-ups I discovered. Although there’s plenty of &lt;a href=&quot;https://www.mercurial-scm.org/wiki/UnderstandingMercurial&quot;&gt;other&lt;/a&gt; &lt;a href=&quot;https://www.mercurial-scm.org/wiki/GitConcepts&quot;&gt;info&lt;/a&gt;  &lt;a href=&quot;https://docs.python.org/devguide/gitdevs.html#mercurial-for-git-developers&quot;&gt;out&lt;/a&gt; &lt;a href=&quot;https://sny.no/hg&quot;&gt;there&lt;/a&gt;, I hope some of this might be helpful for others (especially other Gitters) using Mercurial or &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Introduction&quot;&gt;contributing to Mozilla code&lt;/a&gt; for the first time. Ready to heat things up? Let’s do this!&lt;/p&gt;

&lt;h2 id=&quot;getting-my-bearings-on-planet-mercury&quot;&gt;Getting my bearings on Planet Mercury&lt;/h2&gt;

&lt;p&gt;OK, so I’ve been working through the &lt;a href=&quot;http://areweeveryoneyet.org/onramp/desktop.html&quot;&gt;Firefox Onramp&lt;/a&gt; to install Mercurial (via the &lt;code class=&quot;highlighter-rouge&quot;&gt;bootstrap&lt;/code&gt; script) and clone the &lt;code class=&quot;highlighter-rouge&quot;&gt;mozilla-central&lt;/code&gt; repository, i.e. the source code for Firefox. This is just like Git; all I have to do is:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg clone &amp;lt;repo&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;(Incidentally, I like to pronounce the &lt;code class=&quot;highlighter-rouge&quot;&gt;hg&lt;/code&gt; command “hug”, e.g. “hug clone”. Warm fuzzies!)&lt;/p&gt;

&lt;p&gt;Cool, I’ve set foot on a new planet! …But where am I? What’s going on?&lt;/p&gt;

&lt;p&gt;Just like in Git, I can find out about the repo’s history with &lt;a href=&quot;https://www.selenic.com/hg/help/log&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;hg log&lt;/code&gt;&lt;/a&gt;. Adding some flags make this even more readable: I like to &lt;code class=&quot;highlighter-rouge&quot;&gt;--limit&lt;/code&gt; the number of changesets (change-whats? more on that later) displayed to a small number, and show the &lt;code class=&quot;highlighter-rouge&quot;&gt;--graph&lt;/code&gt; to see how changes are related. For example:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg log --graph --limit 5
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;or, for short:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg log -Gl5
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This outputs something like:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@    changeset:   300339:e27fe24a746f
|\   tag:         tip
| ~  fxtree:      central
|    parent:      300125:718e392bad42
|    parent:      300338:8b89d98ce322
|    user:        Carsten &quot;Tomcat&quot; Book &amp;lt;cbook@mozilla.com&amp;gt;
|    date:        Fri Jun 03 12:00:06 2016 +0200
|    summary:     merge mozilla-inbound to mozilla-central a=merge
|
o  changeset:   300338:8b89d98ce322
|  user:        Jean-Yves Avenard &amp;lt;jyavenard@mozilla.com&amp;gt;
|  date:        Thu Jun 02 21:08:05 2016 +1000
|  summary:     Bug 1277508: P2. Add HasPendingDrain convenience method. r=kamidphish
|
o  changeset:   300337:9cef6a01859a
|  user:        Jean-Yves Avenard &amp;lt;jyavenard@mozilla.com&amp;gt;
|  date:        Thu Jun 02 20:54:33 2016 +1000
|  summary:     Bug 1277508: P1. Don't attempt to demux new samples while we're currently draining. r=kamidphish
|
o  changeset:   300336:f75d7afd686e
|  user:        Jean-Yves Avenard &amp;lt;jyavenard@mozilla.com&amp;gt;
|  date:        Fri Jun 03 11:46:36 2016 +1000
|  summary:     Bug 1277729: Ignore readyState value when reporting the buffered range. r=jwwang
|
o  changeset:   300335:71a44348d3b7
|  user:        Jean-Yves Avenard &amp;lt;jyavenard@mozilla.com&amp;gt;
~  date:        Thu Jun 02 17:14:03 2016 +1000
   summary:     Bug 1276184: [MSE] P3. Be consistent with types when accessing track buffer. r=kamidphish
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Great! Now what does that all mean?&lt;/p&gt;

&lt;h2 id=&quot;some-confusing-terminology&quot;&gt;Some (confusing) terminology&lt;/h2&gt;

&lt;h3 id=&quot;changesetsrevisions-and-their-identifiers&quot;&gt;Changesets/revisions and their identifiers&lt;/h3&gt;

&lt;p&gt;According to the official definition, a &lt;a href=&quot;https://www.mercurial-scm.org/wiki/ChangeSet&quot;&gt;&lt;strong&gt;changeset&lt;/strong&gt;&lt;/a&gt; is “an atomic collection of changes to files in a repository.” As far as I can tell, this is basically what I would call a &lt;em&gt;commit&lt;/em&gt; in Gitese. For now, that’s how I’m going to think of a changeset, though I’m sure there’s some subtle difference that’s going to come back to bite me later. Looking forward to it!&lt;/p&gt;

&lt;p&gt;Changesets are also called &lt;a href=&quot;https://www.mercurial-scm.org/wiki/Revision&quot;&gt;&lt;strong&gt;revisions&lt;/strong&gt;&lt;/a&gt; (because two names are better than one?), and each one has (confusingly) two identifying numbers: a local &lt;em&gt;revision number&lt;/em&gt; (a small integer), and a global &lt;em&gt;changeset ID&lt;/em&gt; (a 40-digit hexadecimal, more like Git’s commit IDs). These are what you see in the output of &lt;code class=&quot;highlighter-rouge&quot;&gt;hg log&lt;/code&gt; above in the format:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;changeset: &amp;lt;revision-number&amp;gt;:&amp;lt;changeset-ID&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;For example,&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;changeset:   300339:e27fe24a746f
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;is the changeset with revision number 300339 (its number in &lt;em&gt;my copy of the repo&lt;/em&gt;) and changeset ID e27fe24a746f (its number &lt;em&gt;everywhere&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;Why the confusing double-numbering? Well, &lt;a href=&quot;https://www.mercurial-scm.org/wiki/RevisionNumber&quot;&gt;apparently&lt;/a&gt; because revision numbers are “shorter to type” when you want to refer to a certain changeset locally on the command line; but since revision numbers only apply to your local copy of the repo and will “very likely” be different in another contributor’s local copy, you should only use changeset IDs when discussing changes with others. But on the command line I usually just copy-paste the hash I want, so length doesn’t really matter, so… I’m just going to ignore revision numbers and always use changeset IDs, OK Mercurial? Cool.&lt;/p&gt;

&lt;h3 id=&quot;branches-bookmarks-heads-and-the-tip&quot;&gt;Branches, bookmarks, heads, and the tip&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;I know Git! I know what a “branch” is!  &lt;em&gt;- Anjana, learning Mercurial&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yeeeah, about that… Unfortunately, this term in Gitese is a &lt;a href=&quot;https://en.wikipedia.org/wiki/False_friend&quot;&gt;false friend&lt;/a&gt; of its Mercurialian equivalent.&lt;/p&gt;

&lt;p&gt;In the land of Gitania, when it’s time to start work on a new bug/feature, I make a new branch, giving it a feature-specific name; do a bunch of work on that branch, merging in master as needed; then merge the branch back into master whenever the feature is complete. I can make as many branches as I want, whenever I want, and give them whatever names I want.&lt;/p&gt;

&lt;p&gt;This is because in Git, a “branch” is basically just a pointer (a reference or “ref”) to a certain commit, so I can add/delete/change that pointer whenever and however I want without altering the commit(s) at all.  But on Mercury, a &lt;a href=&quot;https://www.mercurial-scm.org/wiki/Branch&quot;&gt;&lt;strong&gt;branch&lt;/strong&gt;&lt;/a&gt; is simply a “diverged” series of changesets; it comes to exist simply by virtue of a given changeset having multiple children, and it doesn’t need to have a name. In the output of &lt;code class=&quot;highlighter-rouge&quot;&gt;hg log --graph&lt;/code&gt;, you can see the branches on the left hand side: continuation of a branch looks like &lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt;, merging &lt;code class=&quot;highlighter-rouge&quot;&gt;|\&lt;/code&gt;, and branching &lt;code class=&quot;highlighter-rouge&quot;&gt;|/&lt;/code&gt;. &lt;a href=&quot;https://www.mercurial-scm.org/wiki/GraphlogExtension&quot;&gt;Here&lt;/a&gt; are some examples of what that looks like.&lt;/p&gt;

&lt;p&gt;Confusingly, Mercuial also has &lt;a href=&quot;https://www.mercurial-scm.org/wiki/NamedBranches&quot;&gt;&lt;strong&gt;named branches&lt;/strong&gt;&lt;/a&gt;, which are intended to be longer-lived than branches in Git, and actually become part of a commit’s information; when you make a commit on a certain named branch, that branch is part of that commit forever. &lt;a href=&quot;https://felipec.wordpress.com/2011/01/16/mercurial-vs-git-its-all-in-the-branches/&quot;&gt;This post&lt;/a&gt; has a pretty good explanation of this.&lt;/p&gt;

&lt;p&gt;Luckily, Mercurial does have an equivalent to Git’s branches: they’re called &lt;a href=&quot;https://www.mercurial-scm.org/wiki/Bookmarks&quot;&gt;&lt;strong&gt;bookmarks&lt;/strong&gt;&lt;/a&gt;. Like Git branches, Mercurial bookmarks are just handy references to certain commits. I can create a new one thus:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg bookmark my-awesome-bookmark
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;When I make it, it will point to the changeset I’m currently on, and if I commit more work, it will move forward to point to my most recent changeset. Once I’ve created a bookmark, I can use its name pretty much anywhere I can use a changeset ID, to refer to the changeset the bookmark is pointing to: e.g. to point to the bookmark I can do &lt;code class=&quot;highlighter-rouge&quot;&gt;hg up my-awesome-bookmark&lt;/code&gt;. I can see all my bookmarks and the changesets they’re pointing to with the command:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg bookmarks
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;which outputs something like:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   loadvars                  298655:fe18ebae0d9c
   resetstats                300075:81795401c97b
 * my-awesome-bookmark       300339:e27fe24a746f
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;When I’m on a bookmark, it’s “active”; the currently active bookmark is indicated with a &lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;OK, maybe I was wrong about branches, but at least I know what the “HEAD” is!  &lt;em&gt;- Anjana, a bit later&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yeah, nope. I think of the “HEAD” in Git as the branch (or commit, if I’m in “detached HEAD” state) I’m currently on, i.e. a pointer to (the pointer to) the commit that would end up the parent of whatever I commit next. In Mercurial, this doesn’t seem to have a special name like “HEAD”, but it’s indicated in the output of &lt;code class=&quot;highlighter-rouge&quot;&gt;hg log --graph&lt;/code&gt; by the symbol &lt;code class=&quot;highlighter-rouge&quot;&gt;@&lt;/code&gt;. However, Mercurial documentation does talk about &lt;a href=&quot;https://www.mercurial-scm.org/wiki/Head&quot;&gt;&lt;strong&gt;heads&lt;/strong&gt;&lt;/a&gt;, which are just the most recent changesets on all branches (regardless of whether those branches have names or bookmarks pointing to them or not).&lt;sup id=&quot;a2&quot;&gt;&lt;a href=&quot;#f2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; You can see all those with the command &lt;code class=&quot;highlighter-rouge&quot;&gt;hg heads&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The head which is the most recent changeset, period, gets a special name: the &lt;a href=&quot;https://www.mercurial-scm.org/wiki/Head&quot;&gt;&lt;strong&gt;tip&lt;/strong&gt;&lt;/a&gt;. This is another slight difference from Git, where we can talk about “the tip of a branch”, and therefore have several tips. In Mercurial, there is only one. It’s labeled in the output of &lt;code class=&quot;highlighter-rouge&quot;&gt;hg log&lt;/code&gt; with &lt;code class=&quot;highlighter-rouge&quot;&gt;tag: tip&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;recap-mercurial-glossary&quot;&gt;Recap: Mercurial glossary&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Term&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://www.mercurial-scm.org/wiki/Branch&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;a “diverged” series of changesets; doesn’t need to have a name&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://www.mercurial-scm.org/wiki/Bookmarks&quot;&gt;bookmark&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;a named reference to a given commit; can be used much like a Git branch&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://www.mercurial-scm.org/wiki/Head&quot;&gt;heads&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;the last changesets on each diverged branch, i.e. changesets which have no children&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://www.mercurial-scm.org/wiki/Head&quot;&gt;tip&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;the most recent changeset in the entire history (regardless of branch structure)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;all-the-worlds-a-stage-but-mercurys-not-the-world&quot;&gt;All the world’s a stage (but Mercury’s not the world)&lt;/h2&gt;

&lt;p&gt;Just like with Git, I can use &lt;code class=&quot;highlighter-rouge&quot;&gt;hg status&lt;/code&gt; to see the changes I’m about to commit before committing with &lt;code class=&quot;highlighter-rouge&quot;&gt;hg commit&lt;/code&gt;. However, what’s missing is the part where it tells me which changes are &lt;em&gt;staged&lt;/em&gt;, i.e. “to be committed”. Turns out the concept of “staging” is unique to Git; Mercurial doesn’t have it. That means that when you type &lt;code class=&quot;highlighter-rouge&quot;&gt;hg commit&lt;/code&gt;, any changes to any tracked files in the repo will be committed; you don’t have to manually stage them like you do with &lt;code class=&quot;highlighter-rouge&quot;&gt;git add &amp;lt;file&amp;gt;&lt;/code&gt; (&lt;code class=&quot;highlighter-rouge&quot;&gt;hg add &amp;lt;file&amp;gt;&lt;/code&gt; is only used to tell Mercurial to track a new file that it’s not tracking yet).&lt;/p&gt;

&lt;p&gt;However, just like you can use &lt;a href=&quot;/blog/git-add-patch/&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git add --patch&lt;/code&gt;&lt;/a&gt; to stage individual changes to a certain file a la carte, you can use the now-standard &lt;a href=&quot;https://www.mercurial-scm.org/wiki/RecordExtension&quot;&gt;record extension&lt;/a&gt; to commit only certain files or parts of files at a time with &lt;code class=&quot;highlighter-rouge&quot;&gt;hg commit --interactive&lt;/code&gt;. I haven’t yet had occasion to use this myself, but I’m looking forward to it!&lt;/p&gt;

&lt;h2 id=&quot;turning-back-time&quot;&gt;Turning back time&lt;/h2&gt;

&lt;p&gt;I can mess with my Mercurial history in almost exactly the same way as I would in Git, although whereas this functionality is built in to Git, in Mercurial it’s accomplished by means of extensions. I can use the &lt;a href=&quot;https://www.mercurial-scm.org/wiki/RebaseExtension&quot;&gt;rebase extension&lt;/a&gt; to rebase a series of changesets (say, the parents of the active bookmark location) onto a given changeset (say, the latest change I pulled from &lt;code class=&quot;highlighter-rouge&quot;&gt;central&lt;/code&gt;) with &lt;code class=&quot;highlighter-rouge&quot;&gt;hg rebase&lt;/code&gt;, and I can use the &lt;code class=&quot;highlighter-rouge&quot;&gt;hg histedit&lt;/code&gt; command provided by the &lt;a href=&quot;https://www.mercurial-scm.org/wiki/HisteditExtension&quot;&gt;histedit extension&lt;/a&gt; to reorder, edit, and squash (or “fold”, to use the Mercurialian term) changesets like I would with &lt;code class=&quot;highlighter-rouge&quot;&gt;git rebase --interactive&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;my-mozilla-workflow&quot;&gt;My Mozilla workflow&lt;/h2&gt;

&lt;p&gt;In my &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1275269&quot;&gt;recent work&lt;/a&gt; refactoring and adding unit tests for &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;Marionette&lt;/a&gt;’s Python test runner, I use a workflow that goes something like this.&lt;/p&gt;

&lt;p&gt;I’m gonna start work on a new bug/feature, so first I want to make a new bookmark for work that will branch off of &lt;code class=&quot;highlighter-rouge&quot;&gt;central&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg up central
$ hg bookmark my-feature
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now I go ahead and do some work, and when I’m ready to commit it I simply do:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg commit
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;which opens my default editor so that I can write a super great commit message. It’s going to be informative and &lt;a href=&quot;http://mozilla-version-control-tools.readthedocs.io/en/latest/mozreview/commits.html#formatting-commit-messages-to-influence-behavior&quot;&gt;formatted properly&lt;/a&gt; for &lt;a href=&quot;http://mozilla-version-control-tools.readthedocs.io/en/latest/mozreview.html&quot;&gt;MozReview&lt;/a&gt;/&lt;a href=&quot;https://bugzilla.mozilla.org/&quot;&gt;Bugzilla&lt;/a&gt;, so it might look something like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Bug 1275269 - Add tests for _add_tests; r?maja_zf

Add tests for BaseMarionetteTestRunner._add_tests:
Test that _add_tests populates self.tests with correct tests;
Test that invalid test names cause _add_tests to
throw Exception and report invalid names as expected.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;After working for a while, it’s possible that some new changes have come in on &lt;code class=&quot;highlighter-rouge&quot;&gt;central&lt;/code&gt; (this happens about daily), so I may need to rebase my work on top of them. I can do that with:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg pull central
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;followed by:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg rebase -d central
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;which rebases the commits in the branch that my bookmark points to onto the most recent changeset in &lt;code class=&quot;highlighter-rouge&quot;&gt;central&lt;/code&gt;. Note that this assumes that the bookmark I want to rebase is currently active (I can check if it is with &lt;code class=&quot;highlighter-rouge&quot;&gt;hg bookmarks&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Then maybe I commit some more work, so that now I have a series of commits on my bookmark. But perhaps I want to reorder them, squash some together, or edit commit messages; no problemo, I just do a quick:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg histedit
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;which opens a &lt;a href=&quot;https://www.mercurial-scm.org/wiki/HisteditExtension#line-1-3&quot;&gt;history&lt;/a&gt; listing all the changesets on my bookmark. I can edit that file to &lt;code class=&quot;highlighter-rouge&quot;&gt;pick&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;fold&lt;/code&gt; (squash), or &lt;code class=&quot;highlighter-rouge&quot;&gt;edit&lt;/code&gt; changesets in pretty much the same way I would using &lt;code class=&quot;highlighter-rouge&quot;&gt;git rebase --interactive&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When I’m satisfied with the history, I &lt;a href=&quot;http://mozilla-version-control-tools.readthedocs.io/en/latest/mozreview/commits.html#submitting-commits-for-review&quot;&gt;push my changes to review&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ hg push review
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;My special Mozillian configuration of Mercurial, which a wizard helped me set up during &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Mercurial/Installing_Mercurial&quot;&gt;installation&lt;/a&gt;, magically prepares everything for MozReview and then asks me if I want to&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;publish these review requests now (Yn)?
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;To which I of course say &lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt; (or, you know, realize I made a horrible mistake, say &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;, go back and re-do everything, and then push to review again).&lt;/p&gt;

&lt;p&gt;Then I just wait for review feedback from my mentor, and perhaps make some changes and amend my commits based on that feedback, and push those to review again.&lt;/p&gt;

&lt;p&gt;Ultimately, once the review has passed, my changes get merged into &lt;code class=&quot;highlighter-rouge&quot;&gt;mozilla-inbound&lt;/code&gt;, then eventually &lt;code class=&quot;highlighter-rouge&quot;&gt;mozilla-central&lt;/code&gt; (more on what that all means in a future post), and I become an official contributor. Yay! :)&lt;/p&gt;

&lt;h2 id=&quot;so-is-this-goodbye-git&quot;&gt;So is this goodbye Git?&lt;/h2&gt;

&lt;p&gt;Nah, I’ll still be using Git as my go-to version control system for my own projects, and another Mozilla project I’m contributing to, &lt;a href=&quot;https://wiki.mozilla.org/EngineeringProductivity/Projects/Perfherder&quot;&gt;Perfherder&lt;/a&gt;, has its code on &lt;a href=&quot;https://github.com/mozilla/treeherder&quot;&gt;Github&lt;/a&gt;, so Git is the default for that.&lt;/p&gt;

&lt;p&gt;But learning to use Mercurial, like learning any new tool, has been educational! Although my progress was (and still is) a bit slow as I get used to the differences in features/workflow (which, I should reiterate, are quite minor when coming from Git), I’ve learned a bit more about version control systems in general, and some of the design decisions that have gone into these two. Plus, I’ve been able to contribute to a great open-source project! I’d call that a win. Thanks Mercurial, you deserve a &lt;code class=&quot;highlighter-rouge&quot;&gt;hg&lt;/code&gt;. :)&lt;/p&gt;

&lt;h2 id=&quot;further-reading&quot;&gt;Further reading&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mercurial-scm.org/wiki/UnderstandingMercurial&quot;&gt;Understanding Mercurial&lt;/a&gt; and &lt;a href=&quot;https://www.mercurial-scm.org/wiki/GitConcepts&quot;&gt;Mercurial for Git users&lt;/a&gt; on the Mercurial wiki&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.python.org/devguide/gitdevs.html&quot;&gt;Mercurial for git developers&lt;/a&gt; from the Python Developer’s Guide&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sny.no/hg&quot;&gt;Mercurial Tips&lt;/a&gt; from Mozilla developer Andreas Tolfsen (:ato)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://felipec.wordpress.com/2011/01/16/mercurial-vs-git-its-all-in-the-branches/&quot;&gt;Mercurial vs Git; it’s all in the branches&lt;/a&gt; by Felipe Contreras&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;notes&quot;&gt;Notes&lt;/h4&gt;

&lt;p&gt;&lt;b id=&quot;f1&quot;&gt;1&lt;/b&gt; However, there is a small but ardent faction of Mozilla devs who refuse to stop using &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Git&quot;&gt;Git&lt;/a&gt;. Despite being a Gitter, I chose to forego this option and use Mercurial because a) it’s the default, so most of the documentation etc. assumes it’s what you’re using, and b) I figured it was a good chance to get to know a new tool. &lt;a href=&quot;#a1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;f2&quot;&gt;2&lt;/b&gt; Git actually uses this term the same way; the tips of all branches are stored in &lt;code class=&quot;highlighter-rouge&quot;&gt;.git/refs/heads&lt;/code&gt;. But in my experience the term “heads” doesn’t pop up as often in Git as in Mercurial. Maybe this is because in Git we can talk about “branches” instead? &lt;a href=&quot;#a2&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>When it comes to version control, I’m a Git girl. I had to use Subversion a little bit for a project in grad school (not distributed == not so fun). But I had never touched Mercurial until I decided to contribute to Mozilla’s Marionette, a testing tool for Firefox, for my Outreachy application. Mercurial is the main version control system for Firefox and Marionette development,1 so this gave me a great opportunity to start learning my way around the hg. Turns out it’s really close to Git, though there are some subtle differences that can be a little tricky. This post documents the basics and the trip-ups I discovered. Although there’s plenty of other info  out there, I hope some of this might be helpful for others (especially other Gitters) using Mercurial or contributing to Mozilla code for the first time. Ready to heat things up? Let’s do this!</summary></entry><entry><title>testing 6</title><link href="/blog/outreachy-what-how-why/" rel="alternate" type="text/html" title="testing 6" /><published>2016-05-23T00:00:00-07:00</published><updated>2016-05-23T00:00:00-07:00</updated><id>/blog/outreachy-what-how-why</id><content type="html" xml:base="/blog/outreachy-what-how-why/">&lt;p&gt;Today was my first day as an &lt;a href=&quot;https://gnome.org/outreachy&quot;&gt;Outreachy&lt;/a&gt; intern with &lt;a href=&quot;https://www.mozilla.org&quot;&gt;Mozilla&lt;/a&gt;! What does that even mean? Why is it super exciting? How did I swing such a sweet gig? How will I be spending my summer non-vacation? Read on to find out!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.gnome.org/outreachy&quot;&gt;&lt;img src=&quot;https://outreachy.gnome.org/skins/easterngreen/css/img/outreachy-logo.png&quot; alt=&quot;Outreachy logo&quot; title=&quot;Outreachy logo (outreachy.gnome.org)&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;what-is-outreachy&quot;&gt;What is Outreachy?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://gnome.org/outreachy&quot;&gt;Outreachy&lt;/a&gt; is a fantastic initiative to get more women and members of other underrepresented groups involved in Free &amp;amp; Open Source Software. Through Outreachy, organizations that create open-source software (e.g. &lt;a href=&quot;https://www.mozilla.org/Outreachy&quot;&gt;Mozilla&lt;/a&gt;, &lt;a href=&quot;https://wiki.gnome.org/Outreach/Outreachy&quot;&gt;GNOME&lt;/a&gt;, &lt;a href=&quot;https://www.mediawiki.org/wiki/Outreachy/Round_12&quot;&gt;Wikimedia&lt;/a&gt;, to name a few) take on interns to work full-time on a specific project for 3 months. There are two internship rounds each year, May-August and December-March. Interns are paid for their time, and receive guidance/supervision from an assigned mentor, usually a full-time employee of the organization who leads the given project.&lt;/p&gt;

&lt;p&gt;Oh yeah, and the whole thing is done remotely! For a lot of people (myself included) who don’t/can’t/won’t live in a major tech hub, the opportunity to work remotely removes one of the biggest barriers to jumping in to the professional tech community. But as FOSS developers tend to be pretty distributed anyway (I think my project’s team, for example, is on about 3 continents), it’s relatively easy for the intern to integrate with the team. It seems that most communication takes place over  &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Getting_Started_with_IRC&quot;&gt;IRC&lt;/a&gt; and, to a lesser extent, videoconferencing.&lt;/p&gt;

&lt;h2 id=&quot;what-does-an-outreachy-intern-do&quot;&gt;What does an Outreachy intern do?&lt;/h2&gt;

&lt;p&gt;Anything and everything! Each project and organization is different. But in general, interns spend their time…&lt;/p&gt;

&lt;h4 id=&quot;coding-or-not&quot;&gt;Coding (or not)&lt;/h4&gt;
&lt;p&gt;A lot of projects involve writing code, though what that actually entails (language, framework, writing vs. refactoring, etc.) varies from organization to organization and project to project. However, there are also projects that don’t involve code at all, and instead have the intern working on equally important things like design, documentation, or community management.&lt;/p&gt;

&lt;p&gt;As for me specifically, I’ll be working on the project &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner_.5Bno_longer_taking_applicants.5D&quot;&gt;Test-driven Refactoring of Marionette’s Python Test Runner&lt;/a&gt;. You can click through to the project description for more details, but basically I’ll be spending most of the summer writing Python code (yay!) to test and refactor a component of  &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;Marionette&lt;/a&gt;, a tool that lets developers run automated Firefox tests. This means I’ll be learning a lot about testing in general, Python testing libraries, the huge ecosystem of internal Mozilla tools, and maybe a bit about browser automation. That’s a lot! Luckily, I have my mentor Maja (who happens to also be an alum of both Outreachy and RC!) to help me out along the way, as well as the other members of the Engineering Productivity team, all of whom have been really friendly &amp;amp; helpful so far.&lt;/p&gt;

&lt;h4 id=&quot;traveling&quot;&gt;Traveling&lt;/h4&gt;
&lt;p&gt;Interns receive a $500 stipend for travel related to Outreachy, which is fantastic. I intend, as I’m guessing most do, to use this to attend conference(s) related to open source. If I were doing a winter round I would totally use it to attend &lt;a href=&quot;https://fosdem.org&quot;&gt;FOSDEM&lt;/a&gt;, but there are also a ton of conferences in the summer! Actually, you don’t even need to do the traveling during the actual 3 months of the internship; they give you a year-long window so that if there’s an annual conference you really want to attend but it’s not during your internship, you’re still golden.&lt;/p&gt;

&lt;p&gt;At Mozilla in particular, interns are also invited to a week-long all-hands meet up! This is beyond awesome, because it gives us a chance to meet our mentors and other team members in person. (Actually, I doubly lucked out because I got to meet my mentor at RC during “Never Graduate Week” a couple of weeks ago!)&lt;/p&gt;

&lt;h4 id=&quot;blogging&quot;&gt;Blogging&lt;/h4&gt;
&lt;p&gt;One of the requirements of the internship is to blog regularly about how the internship and project are coming along. This is my first post! Though we’re required to write a post every 2 weeks, I’m aiming to write one per week, on both technical and non-technical aspects of the internship. Stay tuned!&lt;/p&gt;

&lt;h2 id=&quot;how-do-you-get-in&quot;&gt;How do you get in?&lt;/h2&gt;

&lt;p&gt;I’m sure every Outreachy participant has a different journey, but here’s a rough outline of mine.&lt;/p&gt;

&lt;h4 id=&quot;step-1-realize-it-is-a-thing&quot;&gt;Step 1: Realize it is a thing&lt;/h4&gt;
&lt;p&gt;Let’s not forget that the first step to applying for any program/job/whatever is realizing that it exists! Like most people, I think, I had never heard of Outreachy, and was totally unaware that a remote, paid internship working on FOSS was a thing that existed in the universe. But then, in the fall of 2015, I made one of my all-time best moves ever by attending the &lt;a href=&quot;https://www.recurse.com&quot;&gt;Recurse Center&lt;/a&gt; (RC), where I soon learned about Outreachy from various Recursers who had been involved with the program. I discovered it about 2 weeks before applications closed for the December-March 2015-16 round, which was pretty last-minute; but a couple of other Recursers were applying and encouraged me to do the same, so I decided to go for it!&lt;/p&gt;

&lt;h4 id=&quot;step-2-frantically-apply-at-last-minute&quot;&gt;Step 2: Frantically apply at last minute&lt;/h4&gt;
&lt;p&gt;Applying to Outreachy is a relatively involved &lt;a href=&quot;https://wiki.gnome.org/Outreachy#Application_Process&quot;&gt;process&lt;/a&gt;. A couple months before each round begins, the list of participating organizations/projects is released. Prospective applicants are supposed to find a project that interests them, get in touch with the project mentor, and make an initial contribution to that project (e.g. fix a small bug).&lt;/p&gt;

&lt;p&gt;But each of those tasks is pretty intimidating!&lt;/p&gt;

&lt;p&gt;First of all, the list of participating organizations is long and varied, and some organizations (like Mozilla) have tons of different projects available. So even reading through the project descriptions and choosing one that sounds interesting (most of them do, at least to me!) is no small task.&lt;/p&gt;

&lt;p&gt;Then, there’s the matter of mustering up the courage to join the organization/project’s IRC channel, find the project mentor, and talk to them about the application. I didn’t even really know what IRC was, and had never used it before, so I found this pretty scary. Luckily, I was RC, and one of my batchmates sat me down and walked me through IRC basics.&lt;/p&gt;

&lt;p&gt;However, the hardest and most important part is actually making a contribution to the project at hand. Depending on the project, this can be long &amp;amp; complicated, quick &amp;amp; easy, or anything in between. The level of guidance/instruction also varies widely from project to project: some are laid out clearly in small, hand-holdy steps, others are more along the lines of “find something to do and then do it”. Furthermore, prerequisites for making the contribution can be anything from “if you know how to edit text and send an email, you’re fine” to “make a GitHub account” to “learn a new programming language and install 8 million new tools on your system just to set up the development environment”. All in all, this means that making that initial contribution can often be a deceptively large amount of work.&lt;/p&gt;

&lt;p&gt;Because of all these factors, for my application to the December-March round I decided to target the Mozilla project “Contribute to the HTML standard”. In addition to the fact that I thought it would be awesome to contribute to such a fundamental part of the web, I chose it because the contribution itself was really simple: just choose a GitHub issue with a beginner-friendly label, ask some questions via GitHub comments, edit the source markup file as needed, and make a pull request. I was already familiar with GitHub so it was pretty smooth sailing.&lt;/p&gt;

&lt;p&gt;Once you’ve made your contribution, it’s time to write the actual Outreachy application. This is just a &lt;a href=&quot;https://wiki.gnome.org/Outreachy#Application_Form&quot;&gt;plain text file&lt;/a&gt; you fill out with lots of information about your experience with FOSS, your contribution to the project, etc. In case it’s useful to anyone, here’s &lt;a href=&quot;https://docs.google.com/document/d/1jgMBJeqTzgcYlSVOz_QQlz1w2coNy5m0H59XLmoTYM0/edit?usp=sharing&quot;&gt;my application&lt;/a&gt; for the December-March 2015-16 round. But before you use that as an example, make sure you read what happened next…&lt;/p&gt;

&lt;h4 id=&quot;step-3-dont-get-in&quot;&gt;Step 3: Don’t get in&lt;/h4&gt;

&lt;p&gt;Unfortunately, I didn’t get in to the December-March round (although I was stoked to see some of my fellow Recursers get accepted!). Honestly, I wasn’t too surprised, since my contributions and application had been so hectic and last-minute. But even though it wasn’t successful, the application process was educational in and of itself: I learned how to use IRC, got 3 of my first 5 GitHub pull requests merged, and became a &lt;a href=&quot;https://html.spec.whatwg.org/multipage/acknowledgements.html&quot;&gt;contributor to the HTML standard&lt;/a&gt;! Not bad for a failure!&lt;/p&gt;

&lt;h4 id=&quot;step-4-decide-to-go-for-it-again-at-last-minute-again&quot;&gt;Step 4: Decide to go for it again (at last minute, again)&lt;/h4&gt;

&lt;p&gt;Fast forward six months: after finishing my batch at RC, I had been looking &amp;amp; interview-prepping, but still hadn’t gotten a job. When the applications for the May-August round opened up, I took a glance at the projects and found some cool ones, but decided that I wouldn’t apply this round because a) I needed a Real Job, not an internship, and b) the last round’s application process was a pretty big time investment which hadn’t paid off (although it actually had, as I just mentioned!).&lt;/p&gt;

&lt;p&gt;But as the weeks went by, and the application deadline drew closer, I kept thinking about it. I was no closer to finding a Real Job, and upheaval in my personal life made my whereabouts over the summer an uncertainty (I seem never to know what continent I live on), so a paid, remote internship was becoming more and more attractive. When I broached my hesitation over whether or not to apply to other Recursers, they unanimously encouraged me (again) to go for it (again). Then, I found out that one of the project mentors, Maja, was a Recurser, and since her project was one of the ones I had shortlisted, I decided to apply for it.&lt;/p&gt;

&lt;p&gt;Of course, by this point it was once again two weeks until the deadline, so panic once again set in!&lt;/p&gt;

&lt;h4 id=&quot;step-5-learn-from-past-mistakes&quot;&gt;Step 5: Learn from past mistakes&lt;/h4&gt;

&lt;p&gt;This time, the process as a whole was easier, because I had already done it once. IRC was less scary, I already felt comfortable asking the project mentor questions, and having already been rejected in the previous round made it somehow lower-stakes emotionally (“What the hell, at least I’ll get a PR or two out of it!”). During my first application I had spent a considerable amount of time reading about all the different projects and fretting about which one to do, flipping back and forth mentally until the last minute. This time, I avoided that mistake and was laser-focused on a single project: &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner_.5Bno_longer_taking_applicants.5D&quot;&gt;Test-driven Refactoring of Marionette’s Python Test Runner&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;From a technical standpoint, however, contributing to the Marionette project was more complicated than the HTML standard had been. Luckily, Maja had written detailed instructions for prospective applicants explaining how to set up the development environment etc., but there were still a lot of steps to work through. Then, because there were so many folks applying to the project, there was actually a shortage of “good-first-bugs” for &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette&quot;&gt;Marionette&lt;/a&gt;! So I ended up making my first contributions to a different but related project, &lt;a href=&quot;https://wiki.mozilla.org/EngineeringProductivity/Projects/Perfherder&quot;&gt;Perfherder&lt;/a&gt;, which meant setting up a different dev environment and working with a different mentor (who was equally friendly). By the time I was done with the Perfherder stuff (which turned out to be a fun little rabbit hole!), Maja had found me something Marionette-specific to do, so I ended up working on both projects as part of my application process.&lt;/p&gt;

&lt;p&gt;When it came time to write the actual application, I also had the luxury of being able to use my &lt;a href=&quot;&quot;&gt;failed December-March application&lt;/a&gt; as both a starting point and an example of what not to do. Some of the more generic parts (my background, etc.) were reusable, which saved time. But when it came to the parts about my contribution to the project and my proposed internship timeline, I knew I had to do a much better job than before. So I opted for over-communciation, and basically wrote down everything I could think of about what I had already done and what I would need to do to complete the goals stated in the &lt;a href=&quot;https://wiki.mozilla.org/Outreachy#Test-driven_Refactoring_of_Marionette.27s_Python_Test_Runner_.5Bno_longer_taking_applicants.5D&quot;&gt;project description&lt;/a&gt; (which Maja had thankfully written quite clearly).&lt;/p&gt;

&lt;p&gt;In the end, my &lt;a href=&quot;https://docs.google.com/document/d/1HJAzL-1WgjvikB-4TQlMadiQDa6wI7CIY2HaIIc0mPI/edit?usp=sharing&quot;&gt;May-August application&lt;/a&gt; was twice as long as my previous one had been. Much of that difference was the proposed timeline, which went from being one short paragraph to about 3 pages. Perhaps I was a bit more verbose than necessary, but I decided to err on the side of too many details, since I had done the opposite in my previous application.&lt;/p&gt;

&lt;h4 id=&quot;step-6-get-a-bit-lucky&quot;&gt;Step 6: Get a bit lucky&lt;/h4&gt;

&lt;p&gt;Spoiler alert: this time I was accepted!&lt;/p&gt;

&lt;p&gt;Although I knew I had made a much stronger application than in the previous round, I was still shocked to find out that I was chosen from what seemed to be a large, competitive applicant pool. I can’t be sure, but I think what made the difference the second time around must have been a) more substantial contributions to two different projects, b) better, more frequent communication with the project mentor and other team members, and c) a much more thorough and better thought-out application text.&lt;/p&gt;

&lt;p&gt;But let’s not forget d) luck. I was lucky to have encouragement and support from the RC community throughout both my applications, lucky to have the time to work diligently on my application because I had no other full-time obligations, lucky to find a mentor who I had something in common with and therefore felt comfortable talking to and asking questions of, and lucky to ultimately be chosen from among what I’m sure were many strong applications. So while I certainly did work hard to get this internship, I have to acknowledge that I wouldn’t have gotten in without all of that luck.&lt;/p&gt;

&lt;h2 id=&quot;why-am-i-doing-this&quot;&gt;Why am I doing this?&lt;/h2&gt;

&lt;p&gt;Last week I had the chance to attend &lt;a href=&quot;http://conferences.oreilly.com/oscon/open-source-us&quot;&gt;OSCON 2016&lt;/a&gt;, where Mozilla’s &lt;a href=&quot;http://edunham.net/&quot;&gt;E. Dunham&lt;/a&gt; gave a talk on &lt;a href=&quot;http://conferences.oreilly.com/oscon/open-source-us/public/schedule/detail/49024&quot;&gt;How to learn Rust&lt;/a&gt;. A lot of the information applied to learning any language/new thing, though, including this great recommendation: When embarking on a new skill quest, record your motivation somewhere (I’m going to use this blog, but I suppose Twitter or a vision board or whatever would work too) before you begin.&lt;/p&gt;

&lt;p&gt;The idea is that once you’re in the process of learning the new thing, you will probably have at least one moment where you’re stuck, frustrated, and asking yourself what the hell you were thinking when you began this crazy project. Writing it down beforehand is just doing your future self a favor, by saving up some motivation for a rainy day.&lt;/p&gt;

&lt;p&gt;So, future self, let it be known that I’m doing Outreachy to…&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Write code for an actual real-world project (as opposed to academic/toy projects that no one will ever use)&lt;/li&gt;
  &lt;li&gt;Get to know a great organization that I’ve respected and admired for years&lt;/li&gt;
  &lt;li&gt;Try out working remotely, to see if it suits me&lt;/li&gt;
  &lt;li&gt;Learn more about Python, testing, and automation&lt;/li&gt;
  &lt;li&gt;Gain confidence and feel more like a “real developer”&lt;/li&gt;
  &lt;li&gt;Launch my career in the software industry&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I’m sure these goals will evolve as the internship goes along, but for now they’re the main things driving me. Now it’s just a matter of sitting back, relaxing, and working super hard all summer to achieve them! :D&lt;/p&gt;

&lt;h2 id=&quot;got-any-more-questions&quot;&gt;Got any more questions?&lt;/h2&gt;

&lt;p&gt;Are you curious about Outreachy? Thinking of applying? Confused about the application process? Feel free to reach out to me! Go on, don’t be shy, just use one of those cute little contact buttons and drop me a line. :)&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><category term="outreachy" /><summary>Today was my first day as an Outreachy intern with Mozilla! What does that even mean? Why is it super exciting? How did I swing such a sweet gig? How will I be spending my summer non-vacation? Read on to find out!</summary></entry><entry><title>testing 7</title><link href="/blog/notes-from-jsunconf-2016/" rel="alternate" type="text/html" title="testing 7" /><published>2016-04-24T00:00:00-07:00</published><updated>2016-04-24T00:00:00-07:00</updated><id>/blog/notes-from-jsunconf-2016</id><content type="html" xml:base="/blog/notes-from-jsunconf-2016/">&lt;p&gt;This conference was awesome: not too big, not too cramped of a schedule (long breaks between talk sessions), free drinks, snacks &amp;amp; meals (with vegan options!), unisex bathrooms (toiletries &amp;amp; tampons provided!), a code of conduct, and - most importantly, to me - a great diversity program that gave me and 16 others support to attend! The unconference format was really interesting, and worked better than I expected. It also enabled something I wasn’t planning on: I gave my first talk at a tech conference!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://lh3.googleusercontent.com/Rv61ltt_JFagIWXMhlIf2Rf50pczPaG2BOvobHh-KaT4nQr-pzbdyjeEFKdRl29xgVQ2OWThkk_jkHJE_jRGmA_JtR8lClFAaLPnhWN401ZU14H5yN_7Zvy5vNvypJ70skD2Lz_sYRG3znRfLD-qdev7f0pJ5QvX25Jk7Q20z9MwwISSzI23XLYtcs2-1q3Lfc_itY5zQQ6iUk4oQmz8TQg-Bas1d3BSMrF9cg6wLpLBX53UTLt-EpmStaID5ZAmxhOdXbJ4aDjIyc5lm-eRKx5TWsgIHQ7HWOfFysipLQ9Mt6LT2rXLv-olCg9mlM41HhUy8VX20Hkcp-QU7ftp5afYhttQrQ6NhciY9C2tNuCgij3H5P7Dat6ufjALey5Cp3jKKaJV2FydTdQW8B6-9boyUvLdsnBvvDhdcpoFEI9441CTcfdmHUs5BHvfykEr6KZdCNPncWv-QQj_ymDcc1i5PGxAlWg9XU6lw0ZnrzCNxlEUK_VRG-LYgTzjWJXQl6RNglI5vsjiBAvJAZwNGw4ErBS3Nw-vCbIqB-ZOfnzL0W83Ndmc8uO4DpRkDIaHwX3XVFIsr3CsVN6s8Nyc8ave83ypUHA=w1158-h772-no&quot; alt=&quot;A photo of a large purple footstool with the JSUnconf logo next to a reusable JSUnconf coffee cup, with the walking feet of a conference attendee visible in the background&quot; title=&quot;On the ground at JSUnconf&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;whats-an-unconference&quot;&gt;What’s an unconference?&lt;/h2&gt;

&lt;p&gt;There’s no pre-planned schedule; instead, at the beginning of each day, anyone who’s interested in giving a talk makes a short pitch of their topic, and for the next hour or so the rest of the attendees vote on which talks they want to attend. The highest-voted talks are selected, and begin shortly after that. It sounds like it would be chaos, but it works!&lt;/p&gt;

&lt;h2 id=&quot;i-gave-my-first-tech-talk-on-3-hours-notice&quot;&gt;I gave my first tech talk! On 3 hours’ notice!&lt;/h2&gt;

&lt;p&gt;On day 2 of the conference, in a completely unexpected turn of events, I proposed, planned, and delivered a 30-minute talk within a period of about 3 hours. Am I crazy? Perhaps. But the good kind of crazy!&lt;/p&gt;

&lt;p&gt;See, there had been some interest in functional programming in JS (as part of the unconference format, people can submit topics they’d like to &lt;em&gt;hear&lt;/em&gt; a talk on as well), and some talks on specific topics related to functional languages/libraries, but no one had proposed a high-level general introduction about it. So, at literally the last minute of the talk-proposal session, I spontaneously got up and pitched “Learning Functional Programming with JS” (that’s how I learned FP, after all!).&lt;/p&gt;

&lt;p&gt;Turns out people were indeed interested: my proposal actually got more votes than any other that day. Which meant that I would present in the main room, the only one out of the three tracks that was being recorded. So all I had to do was, you know, plan a talk and make slides from scratch and then speak for 30 minutes in front of a camera, all in the space of about 3 hours.&lt;/p&gt;

&lt;p&gt;Yay! No, wait… panic!&lt;/p&gt;

&lt;p&gt;Luckily my years of teaching experience and a few presentations at academic conferences came to the rescue. I had to skip a couple of the sessions before mine (luckily some talks were recorded), and get a little instant feedback from a few folks at the conference that I had gotten to know, but ultimately I was able to throw together a talk outline and some &lt;a href=&quot;https://slidr.io/vakila/learning-functional-programming-with-javascript&quot;&gt;slides&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When it came to actually delivering the talk, it was actually less scary than I thought. I even had enough time to do an ad-hoc digression (on the chalkboard!!!) into persistent data structures, which are the topic of my first &lt;em&gt;scheduled&lt;/em&gt; tech talk at &lt;a href=&quot;http://bangbangcon.com/speakers.html#anjana-vakil&quot;&gt;!!Con 2016&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So, how did it go? I’ll let Twitter tell you:&lt;/p&gt;

&lt;div style=&quot;max-width: 60%; margin: 0px auto;&quot;&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;And now: Learning functional programming with JS and &lt;a href=&quot;https://twitter.com/AnjanaVakil&quot;&gt;@AnjanaVakil&lt;/a&gt; &lt;a href=&quot;https://twitter.com/hashtag/jsunconf?src=hash&quot;&gt;#jsunconf&lt;/a&gt; 💡 &lt;a href=&quot;https://t.co/2CzOJ5JID0&quot;&gt;pic.twitter.com/2CzOJ5JID0&lt;/a&gt;&lt;/p&gt;&amp;mdash; Nina (@sssggr) &lt;a href=&quot;https://twitter.com/sssggr/status/724214727631638528&quot;&gt;April 24, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;!-- &lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; --&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Is it a bird? 🐦 No! Plane? ✈ Nope, it&amp;#39;s a Mapreduce Sandwich! 🍔&lt;a href=&quot;https://twitter.com/AnjanaVakil&quot;&gt;@AnjanaVakil&lt;/a&gt;&amp;#39;s 💯 intro to functional prog. &lt;a href=&quot;https://twitter.com/hashtag/jsunconf?src=hash&quot;&gt;#jsunconf&lt;/a&gt; &lt;a href=&quot;https://t.co/uqUniJ4zpg&quot;&gt;pic.twitter.com/uqUniJ4zpg&lt;/a&gt;&lt;/p&gt;&amp;mdash; Flaki (@slsoftworks) &lt;a href=&quot;https://twitter.com/slsoftworks/status/724219910897950720&quot;&gt;April 24, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Back 2 School with &lt;a href=&quot;https://twitter.com/AnjanaVakil&quot;&gt;@AnjanaVakil&lt;/a&gt; and Functional Programming in JS ! &lt;a href=&quot;https://twitter.com/jsunconf&quot;&gt;@jsunconf&lt;/a&gt; Awesome talk ! &lt;a href=&quot;https://twitter.com/hashtag/jsunconf?src=hash&quot;&gt;#jsunconf&lt;/a&gt; &lt;a href=&quot;https://t.co/xa4oHYlE68&quot;&gt;pic.twitter.com/xa4oHYlE68&lt;/a&gt;&lt;/p&gt;&amp;mdash; claudiahdz ᕕ( ᐛ )ᕗ (@koste4) &lt;a href=&quot;https://twitter.com/koste4/status/724221656286257152&quot;&gt;April 24, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;One of the best talks of &lt;a href=&quot;https://twitter.com/hashtag/jsunconf?src=hash&quot;&gt;#jsunconf&lt;/a&gt; by &lt;a href=&quot;https://twitter.com/AnjanaVakil&quot;&gt;@AnjanaVakil&lt;/a&gt; &amp;amp; a good reason why DiversitySupport improves the DevCommunity 👍 &lt;a href=&quot;https://t.co/I1YgHc5Vs9&quot;&gt;pic.twitter.com/I1YgHc5Vs9&lt;/a&gt;&lt;/p&gt;&amp;mdash; Robert  Willemelis (@robertSPD) &lt;a href=&quot;https://twitter.com/robertSPD/status/724223007212761088&quot;&gt;April 24, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;/div&gt;

&lt;p&gt;Aw geez y’all, I’m blushing! :D&lt;/p&gt;

&lt;p&gt;The whole thing was a great experience, and definitely gave me a huge confidence boost for speaking at more conferences in the future (look out, &lt;a href=&quot;http://bangbangcon.com/speakers.html#anjana-vakil&quot;&gt;!!Con&lt;/a&gt; and &lt;a href=&quot;https://ep2016.europython.eu/conference/p/-958&quot;&gt;EuroPython&lt;/a&gt;!). I would recommend it to anyone! Come to think of it, &lt;a href=&quot;https://speakerdeck.com/sheley/why-arent-you-giving-talks-yet-jsunconf2016&quot;&gt;why aren’t you giving talks yet?&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;some-things-i-learned-at-jsunconf&quot;&gt;Some things I learned at JSUnconf&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;The unconference format is pretty sweet!&lt;/li&gt;
  &lt;li&gt;Giving a tech talk is not as scary as all that!&lt;/li&gt;
  &lt;li&gt;HTTP/2 is a thing&lt;/li&gt;
  &lt;li&gt;Service Workers are a thing&lt;/li&gt;
  &lt;li&gt;There is a library for building neural nets in JS: &lt;a href=&quot;http://synaptic.juancazala.com/#/&quot;&gt;Synaptic&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;I want to learn Elm&lt;/li&gt;
  &lt;li&gt;Flora Power Mate is so much better than Club Mate (i.e. it actually tastes like mate)!&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;talk-notes&quot;&gt;Talk notes&lt;/h2&gt;

&lt;p&gt;These are the unedited notes I jotted down during the talks. Mistakes, omissions, and misunderstandings are totally possible! Don’t take my word for anything; when in doubt check out the &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1UztwJ7g-R0L6WznNF6JYWwamMsChZeAL_VV2qyrSe8o/edit#gid=0&quot;&gt;slides&lt;/a&gt;!&lt;/p&gt;

&lt;h3 id=&quot;http2&quot;&gt;HTTP/2&lt;/h3&gt;

&lt;p&gt;Speaker: Ole Michaelis (@CodeStars, nesQuick on Github), from Jimdo&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP/1.1 has been in use since 1997&lt;/li&gt;
  &lt;li&gt;But it has some problems:
    &lt;ul&gt;
      &lt;li&gt;Lots of requests required to load a single page; “request bonanza”&lt;/li&gt;
      &lt;li&gt;Have to load the page itself, assets, ad stuff, tracking stuff….&lt;/li&gt;
      &lt;li&gt;Requests have to be done one-at-a-time, creating a “‘waterfall’ of blocked requests”&lt;/li&gt;
      &lt;li&gt;This causes latency (e.g. ~10 second load time for a web page like The Verge)&lt;/li&gt;
      &lt;li&gt;Especially problematic for mobile&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;You can get around it with weird hacks/workarounds, but these could violate best practices&lt;/li&gt;
  &lt;li&gt;Google made a thing called SPDY (“speedy”), which was sort of a predecessor to…&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://http2.github.io/faq/&quot;&gt;HTTP/2&lt;/a&gt; is the real solution
    &lt;ul&gt;
      &lt;li&gt;Binary, not text&lt;/li&gt;
      &lt;li&gt;Single TCP connection, but multiple streams with requests running in parallel&lt;/li&gt;
      &lt;li&gt;Headers are compressed&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Each browser can determine how to figure out/build the tree of dependencies
    &lt;ul&gt;
      &lt;li&gt;Firefox has the most efficient implementation at the moment&lt;/li&gt;
      &lt;li&gt;It sets up the dependency tree of requests before actually making any requests (?)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Sidenote: Huffman encoding
    &lt;ul&gt;
      &lt;li&gt;Take a string to compress&lt;/li&gt;
      &lt;li&gt;Count the frequencies of each character&lt;/li&gt;
      &lt;li&gt;Make a binary tree such that the leaf nodes are the characters arranged left-to-right from most frequent to least, and the leaves are connected through binary nodes from right to left, where each branch is labeled 0 on the left and 1 on the right&lt;/li&gt;
      &lt;li&gt;Use the path from the root of the tree to the character’s leaf node as the compression table&lt;/li&gt;
      &lt;li&gt;So the most frequent character will be 00, the least frequent will be e.g. 1111&lt;/li&gt;
      &lt;li&gt;This means more frequent characters have shorter compressions, so the overall compression will be as small as possible&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;HTTP/2 is already in use (22% of sites(???)) - you should start using it now!
    &lt;ul&gt;
      &lt;li&gt;Customers using HTTP/1.1 will experience an increase in load times, but those using updated browsers will see a decrease&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;natural-user-interfaces-using-js&quot;&gt;Natural user interfaces using JS&lt;/h3&gt;

&lt;p&gt;Speaker: @princi_ya, from Zalando&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Gesture-based interfaces, e.g. Intel RealSense 3D, Leap Motion&lt;/li&gt;
  &lt;li&gt;Some terminology:
    &lt;ul&gt;
      &lt;li&gt;Augmented Reality, also called Mediated Reality(?): real environment augmented with virtual components&lt;/li&gt;
      &lt;li&gt;Virtual Reality: totally simulated environment&lt;/li&gt;
      &lt;li&gt;Perceptual Computing: automatically perceiving what’s happening in the environment&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Using JS/the browser to communicate with RealSense/Leap Motion SDK via WebSocket server and getUserMedia to access the user’s webcam&lt;/li&gt;
  &lt;li&gt;JS-Object Detect - open-source library for object detection from webcam&lt;/li&gt;
  &lt;li&gt;Unfortunately not very accurate - demo didn’t work&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;elm-web-development-with-delight&quot;&gt;Elm: Web development with delight&lt;/h3&gt;

&lt;p&gt;Speaker: Bastian Krol (@bastiankrol), from codecentric&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://basti1302.github.io/talks/2016_jsunconf_hh_elm/index.html#/&quot;&gt;Slides&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Why Elm?
    &lt;ul&gt;
      &lt;li&gt;Clean syntax - inspired by Haskell(?) and OCaml&lt;/li&gt;
      &lt;li&gt;No runtime exceptions (!!!) - if code compiles, it will run&lt;/li&gt;
      &lt;li&gt;Interoperates smoothly with vanilla JS, you can use JS libraries&lt;/li&gt;
      &lt;li&gt;Reduces bug hunting&lt;/li&gt;
      &lt;li&gt;Everything is stateless &amp;amp; immutable
        &lt;ul&gt;
          &lt;li&gt;application is composed out of stateless functions&lt;/li&gt;
          &lt;li&gt;removes a whole category of bugs in JS&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Hello world:
&lt;code class=&quot;highlighter-rouge&quot;&gt;
import Html
main = Html.text &quot;Hello Hamburg!&quot;
&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Convention: every Elm app has a “main” module, and that module has a “main” function&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Optional type annotations (best practice to add type annotations to all your top-level functions):
  ```
  import Html exposing (Html)&lt;/p&gt;

    &lt;p&gt;greet : Int -&amp;gt; String -&amp;gt; Html
  greet number string =
    Html.text str&lt;/p&gt;

    &lt;p&gt;main : Html
  main =
    greet “Hello Hamburg”
  ```&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Elm supports partial function application
    &lt;ul&gt;
      &lt;li&gt;when it takes in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Int&lt;/code&gt; in the &lt;code class=&quot;highlighter-rouge&quot;&gt;greet&lt;/code&gt; function above, it essentially returns an anonymous function that takes a &lt;code class=&quot;highlighter-rouge&quot;&gt;String&lt;/code&gt; and returns an &lt;code class=&quot;highlighter-rouge&quot;&gt;Html&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;so there’s no real difference between
&lt;code class=&quot;highlighter-rouge&quot;&gt;greet : Int -&amp;gt; String -&amp;gt; Html&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;greet : Int -&amp;gt; (String -&amp;gt; Html)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Signals
    &lt;ul&gt;
      &lt;li&gt;use &lt;code class=&quot;highlighter-rouge&quot;&gt;Signal.map&lt;/code&gt; to do something with the input from the signal (e.g. map &lt;code class=&quot;highlighter-rouge&quot;&gt;Mouse.x&lt;/code&gt; to Html)&lt;/li&gt;
      &lt;li&gt;can filter signals do drop certain events if you’re not interested&lt;/li&gt;
      &lt;li&gt;you can also&lt;/li&gt;
      &lt;li&gt;Further reading:
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;http://elm-lang.org/guide/reactivity&quot;&gt;Elm guide to reactivity&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;Elm architecture tutorial&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Architecture
    &lt;ul&gt;
      &lt;li&gt;Features:
        &lt;ul&gt;
          &lt;li&gt;Unidirectional data flow&lt;/li&gt;
          &lt;li&gt;Single source of truth&lt;/li&gt;
          &lt;li&gt;Everything immutable &amp;amp; stateless&lt;/li&gt;
          &lt;li&gt;…these are similar to Redux and other popular libraries (who may have copied these features from Elm)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Uniform structure for apps&lt;/li&gt;
      &lt;li&gt;Main concepts:
        &lt;ul&gt;
          &lt;li&gt;Model: custom type that you declare (could be a simple int or a huge data structure)&lt;/li&gt;
          &lt;li&gt;Update: function that takes an action and the current model, and produces a new model (&lt;code class=&quot;highlighter-rouge&quot;&gt;Action -&amp;gt; Model -&amp;gt; Model&lt;/code&gt;)&lt;/li&gt;
          &lt;li&gt;View: function that turns a model into an Html structure (essentially how you render the model)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Compiler
    &lt;ul&gt;
      &lt;li&gt;Catches edge cases etc., e.g. empty lists&lt;/li&gt;
      &lt;li&gt;So if your code compiles it will run - no runtime errors!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;shipping-an-app-to-production-using-webmidi-and-webaudio-lessons-learned&quot;&gt;Shipping an app to production using WebMIDI and WebAudio: Lessons learned&lt;/h3&gt;

&lt;p&gt;Speaker: Jan Krutisch&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Web Audio API
    &lt;ul&gt;
      &lt;li&gt;allows you to generate, play back, modify, filter, etc. digital sounds/music of any sort in a flexible way&lt;/li&gt;
      &lt;li&gt;can build synthesizers with it, use audio in your games, etc. etc.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Web MIDI API
    &lt;ul&gt;
      &lt;li&gt;MIDI: Musical Instrument Digital Interface&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Weird bit operations in JS&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;some-experiences-building-an-android-app-with-react-native--redux&quot;&gt;Some experiences building an Android app with React Native &amp;amp; Redux&lt;/h3&gt;

&lt;p&gt;Speaker: Alex Bepple (@alexbepple), from &lt;a href=&quot;http://it-agile.de&quot;&gt;it-agile&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Introducing a new term: Owdaf - One-way reactive data flow (aka unidirectional data flow)&lt;/li&gt;
  &lt;li&gt;What’s cool about Owdaf?
    &lt;ul&gt;
      &lt;li&gt;All UI is a functional representation of the state of the (web/mobile/whatever) app&lt;/li&gt;
      &lt;li&gt;The user always sees the same thing if the state is the same&lt;/li&gt;
      &lt;li&gt;Changing what the user sees requires dispatching an action - but the presentational components don’t need to know anything about that&lt;/li&gt;
      &lt;li&gt;You change something in one place, and everything in UI gets updated automatically&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;React Native
    &lt;ul&gt;
      &lt;li&gt;Bridge between JS and the UI&lt;/li&gt;
      &lt;li&gt;You have native components for the given mobile platform, but they’re controlled from a JS thread&lt;/li&gt;
      &lt;li&gt;Great &lt;a href=&quot;http://js.coach/react-native&quot;&gt;ecosystem of components&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;Some gotchyas: &lt;code class=&quot;highlighter-rouge&quot;&gt;require&lt;/code&gt; is different than in node, problems centering a grid, …&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Redux:
    &lt;ul&gt;
      &lt;li&gt;brings Owdaf to React Native (?)&lt;/li&gt;
      &lt;li&gt;can persist state using redux-storage library&lt;/li&gt;
      &lt;li&gt;can use libraries like redux-act to create actions and reducers&lt;/li&gt;
      &lt;li&gt;encapsulation is a problem (?)&lt;/li&gt;
      &lt;li&gt;there’s supposed to be time-traveling, but it didn’t work last he checked&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;React Native &amp;amp; Redux together:
    &lt;ul&gt;
      &lt;li&gt;Biggest gotchya: how to represent navigation in your global state?&lt;/li&gt;
      &lt;li&gt;for regular React there is react-router-redux&lt;/li&gt;
      &lt;li&gt;no such thing for React Native (because the concept of a URL doesn’t really exist in a native app)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>This conference was awesome: not too big, not too cramped of a schedule (long breaks between talk sessions), free drinks, snacks &amp;amp; meals (with vegan options!), unisex bathrooms (toiletries &amp;amp; tampons provided!), a code of conduct, and - most importantly, to me - a great diversity program that gave me and 16 others support to attend! The unconference format was really interesting, and worked better than I expected. It also enabled something I wasn’t planning on: I gave my first talk at a tech conference!</summary></entry><entry><title>testing 8</title><link href="/blog/my-pr-was-merged-now-what/" rel="alternate" type="text/html" title="testing 8" /><published>2016-03-28T00:00:00-07:00</published><updated>2016-03-28T00:00:00-07:00</updated><id>/blog/my-pr-was-merged-now-what</id><content type="html" xml:base="/blog/my-pr-was-merged-now-what/">&lt;p&gt;So, you’ve just made a contribution to an open-source project on Github by creating a pull request and having it merged by the project’s administrators! Congratulations, you’re a rockstar! …But now what do you do? How do you clean up your fork and your local copy of the repository? It’s a pretty simple process, but involves a few steps; here they are all written down in one place.&lt;/p&gt;

&lt;h3 id=&quot;pull-in-the-central-changes-to-your-local-repo&quot;&gt;1. Pull in the central changes to your local repo&lt;/h3&gt;

&lt;p&gt;Your PR has been merged, so the changes you made are now in the central repository. You want to pull those in (along with any other changes that might have been made to the central repo since you last updated your fork) to your local copy of the repo.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git fetch upstream

git checkout master

git merge upstream/master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;For more info, see &lt;a href=&quot;https://help.github.com/articles/syncing-a-fork/&quot;&gt;Github Help: Syncing a Fork&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;push-the-changes-to-your-fork&quot;&gt;2. Push the changes to your fork&lt;/h3&gt;

&lt;p&gt;Great, now your local copy of the repo is up-to-date. But your fork of the project on Github won’t be updated until you push to it, so go ahead and:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git push origin master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;For more info, see  &lt;a href=&quot;https://help.github.com/articles/pushing-to-a-remote/&quot;&gt;Github Help: Pushing to a Remote&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;optional-delete-the-branch-from-your-fork&quot;&gt;3. [Optional] Delete the branch from your fork&lt;/h3&gt;

&lt;p&gt;If you want, you can clean up your fork by deleting the branch you made for the PR (you did &lt;a href=&quot;https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow&quot;&gt;make a new feature branch&lt;/a&gt; for your work on that feature/bugfix, didn’t you?), so that old branches don’t start to pile up in your repo.&lt;/p&gt;

&lt;p&gt;At the bottom of the Pull Request page on Github, below any comments, there will be a button giving you the option to delete the branch.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://help.github.com/assets/images/help/pull_requests/delete_branch_button.png&quot; alt=&quot;Screenshot: Deleting a PR's branch on Github&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Push it! (Don’t worry, you can un-delete - or “restore” - the branch later if you need to.)&lt;/p&gt;

&lt;p&gt;For more info, see &lt;a href=&quot;https://help.github.com/articles/deleting-unused-branches/&quot;&gt;Github Help: Deleting unused branches&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;optional-delete-the-branch-from-your-local-repo&quot;&gt;4. [Optional] Delete the branch from your local repo&lt;/h3&gt;

&lt;p&gt;This has two sub-steps. (For more info, see &lt;a href=&quot;http://www.fizerkhan.com/blog/posts/Clean-up-your-local-branches-after-merge-and-delete-in-GitHub.html&quot;&gt;this blog post by Fizer Khan&lt;/a&gt;.)&lt;/p&gt;

&lt;h5 id=&quot;a-prune-the-remote-tracker-for-the-branch&quot;&gt;4a. Prune the remote tracker for the branch&lt;/h5&gt;

&lt;p&gt;First, make sure that the right branch(es) will be pruned, using&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote show origin
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;and/or&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote prune --dry-run origin
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Make sure that only the branch(es) you want to delete are marked as &lt;code class=&quot;highlighter-rouge&quot;&gt;stale&lt;/code&gt; (if you used &lt;code class=&quot;highlighter-rouge&quot;&gt;show&lt;/code&gt;) or &lt;code class=&quot;highlighter-rouge&quot;&gt;[would prune]&lt;/code&gt; (if you used &lt;code class=&quot;highlighter-rouge&quot;&gt;prune --dry-run&lt;/code&gt;). If everything looks OK, go ahead and actually prune the branch:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote prune origin
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;b-delete-your-local-copy-of-the-branch&quot;&gt;4b. Delete your local copy of the branch&lt;/h5&gt;

&lt;p&gt;You don’t have to, but if you want to it’s easy:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git branch -d my-branch
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;all-done&quot;&gt;All done!&lt;/h3&gt;

&lt;p&gt;Sit back, relax, and enjoy a celebratory glass of bubbly while you bask in the glory of your open-source contribution and immaculately tidy repo. Er, I mean, get to work on that next PR!&lt;/p&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>So, you’ve just made a contribution to an open-source project on Github by creating a pull request and having it merged by the project’s administrators! Congratulations, you’re a rockstar! …But now what do you do? How do you clean up your fork and your local copy of the repository? It’s a pretty simple process, but involves a few steps; here they are all written down in one place.</summary></entry><entry><title>testing 9</title><link href="/blog/neural-nets-for-NLP/" rel="alternate" type="text/html" title="testing 9" /><published>2016-03-16T00:00:00-07:00</published><updated>2016-03-16T00:00:00-07:00</updated><id>/blog/neural-nets-for-NLP</id><content type="html" xml:base="/blog/neural-nets-for-NLP/">&lt;p&gt;These are my notes from the tutorial “Neural Networks for Natural Language Processing”, given by &lt;a href=&quot;https://www.cs.bgu.ac.il/~yoavg/uni/&quot;&gt;Yoav Goldberg&lt;/a&gt; at the &lt;a href=&quot;http://www.dfki.de/lt/&quot;&gt;German Research Center for AI (DFKI)&lt;/a&gt; at Saarland University on March 16, 2016. Often, NNs tutorials use examples from the field of image processing, so it was really nice to hear a tutorial focused on linguistic data and analysis. Here’s an overview of the most important things I took away from the talk; check out the notes below and the &lt;a href=&quot;http://u.cs.biu.ac.il/~yogo/nnlp.pdf&quot;&gt;PDF version of the tutorial&lt;/a&gt; for more details.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Representing linguistic features&lt;/strong&gt; We need to represent our input data as vectors. Two possible representations are:
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;“one-hot”&lt;/strong&gt;: each input (e.g. representing a word in a sentence) is a long, sparse binary vector, with each element representing a linguistic feature (e.g. “word is ‘DOG’”, “previous word is ‘THE’”, “part of speech is ‘NOUN’”, etc.). Under this representation, each feature is independent.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;feature embeddings&lt;/strong&gt;: each linguistic feature receives its own vector, and these vectors can be combined (e.g. by concatenation or summing) to create a single vector representing the input. This representation is preferred for NNs, because a) feature vectors are now a parameter of the model and can be trained, and b) features interdependence can be captured - similar features will have similar vectors.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Recurrent Neural Nets&lt;/strong&gt; are pretty cool. They work by maintaining a “memory” over a series of states, such that the output of a given state is determined by the memory of that state, which is determined by the input to that state and the memory of the previous state. This is recursive, but for a finite input sequence, the recursion can be “unrolled” into a finite series of states - akin to rewriting a recursive function as a &lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt; loop.)
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Acceptors&lt;/strong&gt; are RNNs where the output of the final state is what matters. They make a prediction based on the entire sequence, e.g. “Given this sentence (word sequence), what is the sentiment?” or “Given this word (letter sequence), what is the Part Of Speech?”.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Transducers&lt;/strong&gt;, on the other hand, pay attention to the outputs of intermediate states as well. They predict some kind of sequence based on a history, e.g. a language model that generates the next word based on previous words. (Check out &lt;a href=&quot;http://karpathy.github.io/2015/05/21/rnn-effectiveness/&quot;&gt;Andrej Karpathy’s “The Unreasonable Effectiveness of Recurrent Neural Networks”&lt;/a&gt; for some fun examples of this! It’s also just an awesome article.)&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Deep RNNs&lt;/strong&gt; are like multiple RNNs stacked on top of each other, where the output of a given state in a lower layer serves as input to the corresponding state in the next layer up.&lt;/li&gt;
      &lt;li&gt;A &lt;strong&gt;Bidirectional RNN&lt;/strong&gt; is an RNN being run in both directions simultaneously. You could also think of this as two RNNs where the states of one are the “past” (…, &lt;em&gt;i&lt;/em&gt;-2, &lt;em&gt;i&lt;/em&gt;-1) and those of the other are the “future” (&lt;em&gt;i&lt;/em&gt;+1, &lt;em&gt;i&lt;/em&gt;+2, …). The outputs of the two are combined to give a prediction that takes into account the context in both directions. This is useful for e.g. capturing an infinite window around a given word, that takes into account the entire linguistic context (not just the history).&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Deep, Bidirectional RNNs&lt;/strong&gt; also exist. That’s where you have a stack of RNNs and they’re all running in both directions. Crazy. But apparently these are useful for POS tagging.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Encoder-decoder models&lt;/strong&gt;, also called sequence-to-sequence (“seq2seq”) models, use two RNNs: an “encoder” which encodes the input sequence into some intermediate representation, and a “decoder” which transduces some output sequence from the encoded representation. These have been used for e.g. machine translation and sentence simplification.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Disclaimer:&lt;/em&gt; These notes are unedited and only represent my understanding of the material - or possibly my &lt;em&gt;mis&lt;/em&gt;understanding of it! For more (and more accurate) info, read &lt;a href=&quot;http://u.cs.biu.ac.il/~yogo/nnlp.pdf&quot;&gt;Dr. Goldberg’s writing&lt;/a&gt; instead of mine!&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;part-1-feed-forward-nns&quot;&gt;Part 1: Feed-Forward NNs&lt;/h2&gt;

&lt;h3 id=&quot;ways-to-think-of-nns&quot;&gt;Ways to think of NNs&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Modeling non-linear functions (e.g. XOR)&lt;/li&gt;
  &lt;li&gt;Learning representations
    &lt;ul&gt;
      &lt;li&gt;Lower layers learn lower-level representations of the data&lt;/li&gt;
      &lt;li&gt;Image recognition NNs visualize this&lt;/li&gt;
      &lt;li&gt;NLP example: word embeddings - vector representations of word semantics&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;non-linearities&quot;&gt;Non-linearities&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Main options: Sigmoid, tanh&lt;/li&gt;
  &lt;li&gt;Depending on the situation, you might choose either&lt;/li&gt;
  &lt;li&gt;He finds that tanh is usually much better to work with&lt;/li&gt;
  &lt;li&gt;Other alternatives
    &lt;ul&gt;
      &lt;li&gt;“Hard tanh”
        &lt;ul&gt;
          &lt;li&gt;Defined as: 1 if x &amp;gt;= 1, -1 if x &amp;lt;= -1, x otherwise&lt;/li&gt;
          &lt;li&gt;Easier to work with than tanh&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Rectified Linear Unit (ReLU) - Defined as: max(0,x)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;output-transformations&quot;&gt;Output transformations&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Pass output through a “softmax layer”&lt;/li&gt;
  &lt;li&gt;Like in a MaxEnt model&lt;/li&gt;
  &lt;li&gt;This makes the output positive and sum to 1&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;loss-functions&quot;&gt;Loss functions&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;As in general ML, the idea is to fit a function to minimize some loss&lt;/li&gt;
  &lt;li&gt;You have to define a loss function over the output vector and the expected output vector, to quantify the difference between them&lt;/li&gt;
  &lt;li&gt;Usual suspects: perceptron, hinge, log-loss (aka cross-entropy loss, requires softmax beforehand)&lt;/li&gt;
  &lt;li&gt;Hinge loss example on slides - depends on difference between the predicted score of the true class and the predicted score of the next-highest-scorest class&lt;/li&gt;
  &lt;li&gt;Log loss/cross-entropy loss: sum up the product of each label’s score times its log&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;nlp-features-for-word-vectors&quot;&gt;NLP features for word vectors&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Traditionally, represent the word as a long, sparse binary vector (called “one-hot representation”)&lt;/li&gt;
  &lt;li&gt;Each binary feature corresponds to a linguistic property (e.g. “word is ‘dog’”, “previous word is ‘the’”, “POS is NOUN”, etc.)&lt;/li&gt;
  &lt;li&gt;Problems with one-hot representation:
    &lt;ul&gt;
      &lt;li&gt;Must manually define feature combinations (due to linearity)&lt;/li&gt;
      &lt;li&gt;Each feature is independent of the others (e.g. “word is ‘dog’” and “word is ‘dog’ and previous word is ‘the’” have nothing to do with one another)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Better approach for NN modeling: feature embeddings&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;feature-embeddings&quot;&gt;Feature embeddings&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Each feature is assigned a vectors&lt;/li&gt;
  &lt;li&gt;Input is now a combination of feature vectors, instead of a single vectors&lt;/li&gt;
  &lt;li&gt;Feature vectors are parameters of the model, and are trained with the network&lt;/li&gt;
  &lt;li&gt;Similar features now receive similar vectors&lt;/li&gt;
  &lt;li&gt;To represent a given input, you can combine feature vectors&lt;/li&gt;
  &lt;li&gt;you can concatenate the vectors of two words, using the position to indicate which is the current word and which is previous
    &lt;ul&gt;
      &lt;li&gt;pro: preserve order of features&lt;/li&gt;
      &lt;li&gt;con: encoding more features requires longer vector&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;can also sum vectors instead of concatenating them (different feature vectors must be same length)
    &lt;ul&gt;
      &lt;li&gt;pro: can encode any number of features without the input vector getting longer and longer&lt;/li&gt;
      &lt;li&gt;con: “bag of features” approach, doesn’t preserve order&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Continuous Bag of Words (CBOW)
    &lt;ul&gt;
      &lt;li&gt;basically average the feature vectors&lt;/li&gt;
      &lt;li&gt;popular for document classification&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Features that were represented with indicator functions in a traditional linear model (e.g. word, POS) receive embedding vectors in the NN representation&lt;/li&gt;
  &lt;li&gt;Can also embed features that are numeric, by binning them (e.g. sentence length, distance btwn words) and creating a distinct vector for each bin&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;pre-training-embeddings&quot;&gt;Pre-training embeddings&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Pre-training using e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;word2vec&lt;/code&gt; and then fine-tuning during NN training (???) will generally help your model be better able to generalize for things it hasn’t seen&lt;/li&gt;
  &lt;li&gt;Pre-training is largely responsible for the success of NNs in NLP&lt;/li&gt;
  &lt;li&gt;How it works:
    &lt;ul&gt;
      &lt;li&gt;Define auxiliary task that you think is correlated with your prediction problem&lt;/li&gt;
      &lt;li&gt;Train a model to perform this task&lt;/li&gt;
      &lt;li&gt;Take feature representations from the model as inputs to another model&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Example: if your task is predicting a word based on its meaning, an auxiliary task might be predicting a word based on neighboring words (with the reasoning that similar words will have similar neighbors)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;neural-language-models&quot;&gt;Neural language models&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Take vectors of each word in k-length history&lt;/li&gt;
  &lt;li&gt;Concatenate them&lt;/li&gt;
  &lt;li&gt;Feed to Multi-Layer Perceptron (MLP)&lt;/li&gt;
  &lt;li&gt;Feed through &lt;em&gt;softmax&lt;/em&gt; function&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Output: probability of the next word, given the k-length history&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Pros:
    &lt;ul&gt;
      &lt;li&gt;Can use large n-grams&lt;/li&gt;
      &lt;li&gt;Flexible conditioning contexts&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cons:
    &lt;ul&gt;
      &lt;li&gt;Gives good improvement in perplexity, but not in BLEU score (metric for Machine Translation)&lt;/li&gt;
      &lt;li&gt;Slow to train because we need &lt;em&gt;softmax&lt;/em&gt; over the entire vocabulary&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Good at generalization, which is both a pro and con
    &lt;ul&gt;
      &lt;li&gt;seeing “red car”, “blue car”, “yellow car” in data and assigning an OK probability to “green car” is good&lt;/li&gt;
      &lt;li&gt;seeing “black horse”, “brown horse” and thinking “blue horse” is OK is bad&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;training&quot;&gt;Training&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Based on a Computation Graph&lt;/li&gt;
  &lt;li&gt;For each training example (or mini-batch):
    &lt;ul&gt;
      &lt;li&gt;Create graph to compute loss&lt;/li&gt;
      &lt;li&gt;Compute loss (forward)&lt;/li&gt;
      &lt;li&gt;Compute gradients (backwards)&lt;/li&gt;
      &lt;li&gt;Update parameters
        &lt;ul&gt;
          &lt;li&gt;Different methods for this, simplest is Stochastic Gradient Descent (SGD)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;software&quot;&gt;Software&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Long list of libraries/packages including Theano, Torch, PyCNN, …&lt;/li&gt;
  &lt;li&gt;Code using pyCNN as example (see slides)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-2-the-cool-stuff-rnns-and-lstms&quot;&gt;Part 2: The cool stuff (RNNs and LSTMs)&lt;/h2&gt;

&lt;p&gt;We’ll approach these as sort of black-boxes, only concerning ourselves with how to use them (i.e. what is the API?), not how they work under the hood&lt;/p&gt;

&lt;h3 id=&quot;recurrent-neural-networks-rnns&quot;&gt;Recurrent Neural Networks (RNNs)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Input sequence: &lt;code class=&quot;highlighter-rouge&quot;&gt;x_i:x_n&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Memory: &lt;code class=&quot;highlighter-rouge&quot;&gt;s&lt;/code&gt; (way of remembering some kind of state at each step in the network processing)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;RNN(s_0,x_1:x_n) = s_n, y_n&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;At each step, &lt;code class=&quot;highlighter-rouge&quot;&gt;s_i&lt;/code&gt; is determined based on &lt;code class=&quot;highlighter-rouge&quot;&gt;x_i&lt;/code&gt; and the previous &lt;code class=&quot;highlighter-rouge&quot;&gt;s_i-1&lt;/code&gt; by some function &lt;em&gt;R&lt;/em&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;s_i = R(s_i-1, x_i)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;At each step, &lt;code class=&quot;highlighter-rouge&quot;&gt;y_i&lt;/code&gt; is determined based on the memory s by some function &lt;em&gt;O&lt;/em&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;y_i = O(s_i)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;RNNs are recursive
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;y_3 = O(s_3)&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;s_i = R(s_i-1, x_i)&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;y_3 = O(R(s_2, x_3))&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;y_3 = O(R(R(s_1, x_2), x_3))&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;y_3 = O(R(R(R(s_0, x_1), x_2), x_3))&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;But for a finite input sequence, you can “unroll” the recursion into a finite series of steps (like transforming recursive function into iterative one)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;What are these intermediate &lt;code class=&quot;highlighter-rouge&quot;&gt;y_i&lt;/code&gt; vectors for?
    &lt;ul&gt;
      &lt;li&gt;On their own they mean nothing&lt;/li&gt;
      &lt;li&gt;But we can train them, e.g. for loss (see below)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;lstms-and-concurrent-gates&quot;&gt;LSTMs and Concurrent Gates&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Main idea between Long Short-Term Memory (LSTM) is that you want to somehow control the way you access your memory,&lt;/li&gt;
  &lt;li&gt;We want to selectively read from only some memory “cells” (elements in our &lt;code class=&quot;highlighter-rouge&quot;&gt;s&lt;/code&gt; vector), and selectively write to only some of them&lt;/li&gt;
  &lt;li&gt;The gate function controls access: if the gate function is 0, we don’t use that cell&lt;/li&gt;
  &lt;li&gt;The LSTM is a specific combination of gates, which determines what/how much to remember&lt;/li&gt;
  &lt;li&gt;Gated architecture helps the vanishing gradients problem (see paper by Cho)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;defining-loss-in-rnns&quot;&gt;Defining loss in RNNs&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Ignoring intermediate outputs (&lt;code class=&quot;highlighter-rouge&quot;&gt;y_i&lt;/code&gt;)
    &lt;ul&gt;
      &lt;li&gt;Called an “Acceptor”&lt;/li&gt;
      &lt;li&gt;Predict something based on final output (&lt;code class=&quot;highlighter-rouge&quot;&gt;y_n&lt;/code&gt;)
        &lt;ul&gt;
          &lt;li&gt;e.g. given the sequence of words in a sentence, what is the sentiment?&lt;/li&gt;
          &lt;li&gt;e.g. given the sequence of characters in a word, what is its POS?&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Calculate the loss based on the expected output&lt;/li&gt;
      &lt;li&gt;Backpropagate the loss to all the previous states&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Using intermediate outputs (&lt;code class=&quot;highlighter-rouge&quot;&gt;y_i&lt;/code&gt;)
    &lt;ul&gt;
      &lt;li&gt;Called a “Transducer”&lt;/li&gt;
      &lt;li&gt;Predict something &amp;amp; calculate loss based on each intermediate state/outputs&lt;/li&gt;
      &lt;li&gt;Sum the losses once you reach the end&lt;/li&gt;
      &lt;li&gt;Backpropagate the sum through the previous states&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;rnn-language-models&quot;&gt;RNN Language Models&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Training: use Transducer&lt;/li&gt;
  &lt;li&gt;Language generation: the output &lt;code class=&quot;highlighter-rouge&quot;&gt;y_i&lt;/code&gt; at each intermediate state is a prediction of the next word
    &lt;ul&gt;
      &lt;li&gt;e.g. example of “code” generated from model trained on Linux kernel&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;fancy-rnns&quot;&gt;Fancy RNNs&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Bidirectional RNN
    &lt;ul&gt;
      &lt;li&gt;One RNN runs left to right, another right to left&lt;/li&gt;
      &lt;li&gt;The outputs of the two are concatenated&lt;/li&gt;
      &lt;li&gt;Together they make a sort of infinite window around a given word, encoding both the future and the history of the word&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Deep RNN
    &lt;ul&gt;
      &lt;li&gt;You can stack RNNs such that the output from one layer (&lt;code class=&quot;highlighter-rouge&quot;&gt;y_i&lt;/code&gt;) is the input (&lt;code class=&quot;highlighter-rouge&quot;&gt;x_i&lt;/code&gt;) to the next layer&lt;/li&gt;
      &lt;li&gt;This gives you a sort of grid of states, where the output of a given state in a given layer is dependent on the memory of that layer and the output of the corresponding state in the lower layer&lt;/li&gt;
      &lt;li&gt;“Adding more layers helps”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Deep Bidirectional RNN
    &lt;ul&gt;
      &lt;li&gt;What you think it is - a combination of the two&lt;/li&gt;
      &lt;li&gt;Each layer of the deep RNN is running in both directions&lt;/li&gt;
      &lt;li&gt;Useful for e.g. POS tagging&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;encoder-decoder-seq2seq-models&quot;&gt;Encoder-decoder (seq2seq) models&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;One RNN (the encoder RNN) encodes the input, Another (the decoder RNN) transduces something back from the encoded input&lt;/li&gt;
  &lt;li&gt;e.g. for sentence simplification:
    &lt;ul&gt;
      &lt;li&gt;Encode a sentence&lt;/li&gt;
      &lt;li&gt;Decode a sequence of drop/keep decisions&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;e.g. for MT:
    &lt;ul&gt;
      &lt;li&gt;Encode an English sentence&lt;/li&gt;
      &lt;li&gt;Decode into a French sentence&lt;/li&gt;
      &lt;li&gt;See “Sequence to Sequence Learning with Neural Networks” paper by Google folks&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;e.g. for automatic email responses
    &lt;ul&gt;
      &lt;li&gt;Encode an email, decode a short response&lt;/li&gt;
      &lt;li&gt;Used by Google Inbox: see “Computer, respond to this email” on Google Research Blog (Nov 3, 2015)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;e.g. Autoencoder
    &lt;ul&gt;
      &lt;li&gt;Encode an English sentence, then decode it (basically re-generating the sentence)&lt;/li&gt;
      &lt;li&gt;This may seem useless, but the encoded representation can be seen as a generic representation of the sentence content, which you could use for other things (…?)&lt;/li&gt;
      &lt;li&gt;Some folks are working on deciphering what information is contained in the encoded vector&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Valentin Antonio Bautista</name><email>vale.residencia@gmail.com</email></author><summary>These are my notes from the tutorial “Neural Networks for Natural Language Processing”, given by Yoav Goldberg at the German Research Center for AI (DFKI) at Saarland University on March 16, 2016. Often, NNs tutorials use examples from the field of image processing, so it was really nice to hear a tutorial focused on linguistic data and analysis. Here’s an overview of the most important things I took away from the talk; check out the notes below and the PDF version of the tutorial for more details.</summary></entry></feed>
